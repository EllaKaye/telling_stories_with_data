<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 3 R essentials | Telling Stories With Data</title>
<meta name="author" content="Rohan Alexander">
<meta name="description" content="STATUS: Under construction. Required material Read R for Data Science, Chapters 3-6, 8, 10, 11, 13, 14, 15, and 18, (Wickham and Grolemund 2017) Watch Make a reprex… Please, (Gelfand 2021) Read...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 3 R essentials | Telling Stories With Data">
<meta property="og:type" content="book">
<meta property="og:image" content="/tellingstorieswithdatapainting.png">
<meta property="og:description" content="STATUS: Under construction. Required material Read R for Data Science, Chapters 3-6, 8, 10, 11, 13, 14, 15, and 18, (Wickham and Grolemund 2017) Watch Make a reprex… Please, (Gelfand 2021) Read...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 3 R essentials | Telling Stories With Data">
<meta name="twitter:description" content="STATUS: Under construction. Required material Read R for Data Science, Chapters 3-6, 8, 10, 11, 13, 14, 15, and 18, (Wickham and Grolemund 2017) Watch Make a reprex… Please, (Gelfand 2021) Read...">
<meta name="twitter:image" content="/tellingstorieswithdatapainting.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Atkinson%20Hyperlegible-0.4.0/font.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=IBM%20Plex%20Mono&amp;display=swap" rel="stylesheet">
<script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script><script src="libs/mapdeck-binding-0.3.4/mapdeck.js"></script><script src="libs/mpadeck_functions-0.0.1/mapdeck_functions.js"></script><script src="libs/deckgl-8.1.6/deckgl.min.js"></script><script src="libs/legend-0.0.1/legend.js"></script><script src="libs/title-0.0.1/title.js"></script><script src="libs/mapdeck_location-0.0.1/mapdeck_location.js"></script><script src="libs/mapdeck_colours-0.0.1/mapdeck_colours.js"></script><script src="libs/mapdeck_coordinates-0.0.1/mapdeck_coordinates.js"></script><link href="libs/mapboxgl-1.10.0/mapbox-gl.css" rel="stylesheet">
<script src="libs/mapboxgl-1.10.0/mapbox-gl.js"></script><link href="libs/mapdeck-0.0.1/mapdeck.css" rel="stylesheet">
<script src="libs/mpadeck-binding-0.3.4/mapdeck.js"></script><script src="libs/scatterplot-1.0.0/scatterplot.js"></script><script src="libs/viz-1.8.2/viz.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Telling Stories With Data</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="about-the-author.html">About the author</a></li>
<li class="book-part">Foundations</li>
<li><a class="" href="telling-stories-with-data.html"><span class="header-section-number">1</span> Telling Stories with Data</a></li>
<li><a class="" href="drinking-from-a-fire-hose.html"><span class="header-section-number">2</span> Drinking from a fire hose</a></li>
<li><a class="active" href="r-essentials.html"><span class="header-section-number">3</span> R essentials</a></li>
<li><a class="" href="workflow.html"><span class="header-section-number">4</span> Workflow</a></li>
<li class="book-part">Communication</li>
<li><a class="" href="on-writing.html"><span class="header-section-number">5</span> On writing</a></li>
<li><a class="" href="static-communication.html"><span class="header-section-number">6</span> Static communication</a></li>
<li><a class="" href="interactive-communication.html"><span class="header-section-number">7</span> Interactive communication</a></li>
<li class="book-part">Measure and acquire</li>
<li><a class="" href="gather-data.html"><span class="header-section-number">8</span> Gather data</a></li>
<li><a class="" href="hunt-data.html"><span class="header-section-number">9</span> Hunt data</a></li>
<li><a class="" href="farm-data.html"><span class="header-section-number">10</span> Farm data</a></li>
<li class="book-part">Preparation</li>
<li><a class="" href="cleaning-and-preparing-data.html"><span class="header-section-number">11</span> Cleaning and preparing data</a></li>
<li><a class="" href="storing-and-retrieving-data.html"><span class="header-section-number">12</span> Storing and retrieving data</a></li>
<li><a class="" href="disseminating-and-protecting-data.html"><span class="header-section-number">13</span> Disseminating and protecting data</a></li>
<li class="book-part">Modelling</li>
<li><a class="" href="exploratory-data-analysis.html"><span class="header-section-number">14</span> Exploratory data analysis</a></li>
<li><a class="" href="ijalm.html"><span class="header-section-number">15</span> It’s Just A Linear Model</a></li>
<li><a class="" href="causality.html"><span class="header-section-number">16</span> Causality from observational data</a></li>
<li><a class="" href="mrp.html"><span class="header-section-number">17</span> Multilevel regression with post-stratification</a></li>
<li><a class="" href="text-as-data.html"><span class="header-section-number">18</span> Text as data</a></li>
<li class="book-part">Enrichment</li>
<li><a class="" href="using-the-cloud.html"><span class="header-section-number">19</span> Using the cloud</a></li>
<li><a class="" href="deploying-models.html"><span class="header-section-number">20</span> Deploying models</a></li>
<li><a class="" href="efficiency.html"><span class="header-section-number">21</span> Efficiency</a></li>
<li><a class="" href="concludingremarks.html"><span class="header-section-number">22</span> Concluding remarks, open issues, next steps</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="oh-you-think-and-shoulders.html"><span class="header-section-number">A</span> Oh you think and shoulders</a></li>
<li><a class="" href="papers.html"><span class="header-section-number">B</span> Papers</a></li>
<li><a class="" href="references-1.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="r-essentials" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> R essentials<a class="anchor" aria-label="anchor" href="#r-essentials"><i class="fas fa-link"></i></a>
</h1>
<p><strong>STATUS: Under construction.</strong></p>
<p><strong>Required material</strong></p>
<ul>
<li>Read <em>R for Data Science</em>, Chapters 3-6, 8, 10, 11, 13, 14, 15, and 18, <span class="citation">(<a href="references-1.html#ref-r4ds" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>
</li>
<li>Watch <em>Make a reprex… Please</em>, <span class="citation">(<a href="references-1.html#ref-sharlatalks" role="doc-biblioref">Gelfand 2021</a>)</span>
</li>
<li>Read <em>The Kitchen Counter Observatory</em>, <span class="citation">(<a href="references-1.html#ref-kieranskitchen" role="doc-biblioref">Healy 2020</a>)</span>
</li>
<li>Read <em>This is how AI bias really happens—and why it’s so hard to fix</em>, <span class="citation">(<a href="references-1.html#ref-hao2019" role="doc-biblioref">Hao 2019</a>)</span>
</li>
<li>Watch <em>Object of type ‘closure’ is not subsettable</em>, <span class="citation">(<a href="references-1.html#ref-jennybryan" role="doc-biblioref">Jenny Bryan 2020b</a>)</span>
</li>
</ul>
<!-- - Watch *Defining Custom Functions in R*, [@shiroonfunctions]. --><!-- **Recommended reading** --><!-- - Alexander, Monica, 2019, 'The concentration and uniqueness of baby names in Australia and the US', https://www.monicaalexander.com/posts/2019-20-01-babynames/.  --><!-- - Hvitfeldt, Emil, 2020, 'Emoji in ggplot2', https://www.hvitfeldt.me/blog/real-emojis-in-ggplot2/. --><!-- - Pavlik, Kaylin, 2018, 'Dairy Queen Deserts in Minnesota', https://www.kaylinpavlik.com/dairy-queen-deserts/. --><!-- - 'R Studio Cloud Guide', https://rstudio.cloud/learn/guide. --><!-- - Scherer, Cédric, 2019, 'Best TidyTuesday 2019', https://cedricscherer.netlify.com/2019/12/30/best-tidytuesday-2019/. --><!-- - Silge, Julia, 2019, 'Reordering and facetting for ggplot2', https://juliasilge.com/blog/reorder-within/. --><!-- - Smale, David, 2019, 'Happy Days', https://davidsmale.netlify.com/portfolio/happy-days/. --><p><strong>Key concepts and skills</strong></p>
<ul>
<li>Tibbles</li>
<li>Importing data</li>
<li>Joining data</li>
<li>Strings</li>
<li>Factors</li>
<li>Dates</li>
<li>Pivot</li>
</ul>
<p><strong>Key libraries</strong></p>
<ul>
<li><code>ggplot2</code></li>
<li><code>tidyverse</code></li>
</ul>
<p><strong>Key functions</strong></p>
<ul>
<li>
<code>|</code> ‘or’</li>
<li>
<code>&amp;</code> ‘and’</li>
<li>
<code>|&gt;</code> ‘pipe’</li>
<li>
<code>$</code> ‘extract’</li>
<li><code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/integer.html">as.integer()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/c.html">c()</a></code></li>
<li><code><a href="https://rdrr.io/r/utils/citation.html">citation()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/class.html">class()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/arrange.html">dplyr::arrange()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/case_when.html">dplyr::case_when()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/count.html">dplyr::count()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/group_by.html">dplyr::group_by()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/if_else.html">dplyr::if_else()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">dplyr::left_join()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">dplyr::mutate()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/pull.html">dplyr::pull()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/rename.html">dplyr::rename()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/select.html">dplyr::select()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/slice.html">dplyr::slice()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">dplyr::summarise()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/as_factor.html">forcats::as_factor()</a></code></li>
<li><code><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">forcats::fct_relevel()</a></code></li>
<li><code>function()</code></li>
<li><code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">ggplot2::facet_wrap()</a></code></li>
<li><code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">ggplot2::geom_density()</a></code></li>
<li><code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">ggplot2::geom_histogram()</a></code></li>
<li><code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">ggplot2::geom_point()</a></code></li>
<li><code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot2::ggplot()</a></code></li>
<li><code><a href="https://rdrr.io/r/utils/head.html">head()</a></code></li>
<li><code><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">janitor::clean_names()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/library.html">library()</a></code></li>
<li><code><a href="https://lubridate.tidyverse.org/reference/ymd.html">lubridate::ymd()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/print.html">print()</a></code></li>
<li><code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Round.html">round()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/sample.html">sample()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/Random.html">set.seed()</a></code></li>
<li><code><a href="https://rdrr.io/r/stats/Normal.html">stats::rnorm()</a></code></li>
<li><code><a href="https://rdrr.io/r/stats/Uniform.html">stats::runif()</a></code></li>
<li><code><a href="https://stringr.tidyverse.org/reference/str_detect.html">stringr::str_detect()</a></code></li>
<li><code><a href="https://stringr.tidyverse.org/reference/str_replace.html">stringr::str_replace()</a></code></li>
<li><code><a href="https://stringr.tidyverse.org/reference/str_trim.html">stringr::str_squish()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code></li>
<li><code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble::tibble()</a></code></li>
<li><code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">tidyr::pivot_longer()</a></code></li>
<li><code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">tidyr::pivot_wider()</a></code></li>
</ul>
<div id="background" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Background<a class="anchor" aria-label="anchor" href="#background"><i class="fas fa-link"></i></a>
</h2>
<p>In this chapter we focus on foundational skills needed to use the statistical programming language R <span class="citation">(<a href="references-1.html#ref-citeR" role="doc-biblioref">R Core Team 2021</a>)</span> to tell stories with data. Some of it may not make sense at first, but these are skills and approaches that we will come back to throughout these notes. You should initially just go through this chapter quickly, noting aspects that you do not understand. And then come back to this chapter from time to time as you continue through the rest of the book. That way you will see how the various bits fit into context.</p>
<p>R is an open-source language that is useful for statistical programming. You can download R for free from the Comprehensive R Archive Network (CRAN): <a href="https://cran.r-project.org" class="uri">https://cran.r-project.org</a>. R Studio is an Integrated Development Environment (IDE) for R which makes the language easier to use and can be downloaded for free: <a href="https://www.rstudio.com/products/rstudio/" class="uri">https://www.rstudio.com/products/rstudio/</a>.</p>
<p>The past ten years or so, have been characterised by the increased use of the tidyverse. This is ‘…an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures’ <span class="citation">(<a href="references-1.html#ref-tidyversewebsite" role="doc-biblioref">Wickham 2020b</a>)</span>. There are three distinctions here: the original R language, typically referred to as ‘base’; the ‘tidyverse’ which is a collection of packages that build on top of the R language; and other packages.</p>
<p>Essentially everything that we can do in the tidyverse, we can also do in base. But, as the tidyverse was built especially for modern data science it is often easier to use the tidyverse, especially when you are learning. Additionally, often everything that we can do in the tidyverse, we can also do with other packages. But, as the tidyverse is a coherent collection of packages, it is often easier to use the tidyverse, again, especially when you are learning. Eventually one begins to see cases where it makes sense to trade-off the convenience and coherence of the tidyverse for some features of base or other packages. Indeed, we will see that at various points later in this book. For instance, the tidyverse can be slow, and so if one needs to import thousands of CSVs then it can make sense to switch away from <code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv()</a></code>. The appropriate use of base and non-tidyverse packages, rather than dogmatic insistence on a particular solution, is a sign of one’s development.</p>
<p>Central to our use of the statistical programming language R is data, and most of the data that we use will have humans at the heart of it. Sometimes it is easy to forget that, but other times it has the opposite effect.</p>
<blockquote>
<p>In practice, I find that far from distancing you from questions of meaning, quantitative data forces you to confront them. The numbers draw you in. Working with data like this is an unending exercise in humility, a constant compulsion to think through what you can and cannot see, and a standing invitation to understand what the measures really capture—what they mean, and for whom.</p>
<p><span class="citation"><a href="references-1.html#ref-kieranskitchen" role="doc-biblioref">Healy</a> (<a href="references-1.html#ref-kieranskitchen" role="doc-biblioref">2020</a>)</span></p>
</blockquote>
<!-- Get started by loading the `tidyverse` package. -->
<!-- ```{r, warning = FALSE, message = FALSE} -->
<!-- library(tidyverse) -->
<!-- ``` -->
<!-- The general workflow that we will use involves: -->
<!-- 1. Import -->
<!-- 2. Tidy -->
<!-- 3. Transforming, descriptive -->
<!-- 4. Plot -->
<!-- 5. Model -->
<!-- 6. Repeat 3/4 -->
</div>
<div id="broader-impact" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Broader impact<a class="anchor" aria-label="anchor" href="#broader-impact"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>“We shouldn’t have to think about the societal impact of our work because it’s hard and other people can do it for us” is a really bad argument. I stopped doing CV research because I saw the impact my work was having. I loved the work but the military applications and privacy concerns eventually became impossible to ignore. But basically all facial recognition work would not get published if we took Broader Impacts sections seriously. There is almost no upside and enormous downside risk. To be fair though i should have a lot of humility here. For most of grad school I bought in to the myth that science is apolitical and research is objectively moral and good no matter what the subject is.</p>
<p>Joe Redmon, <a href="https://twitter.com/pjreddie/status/1230524770350817280">20 February 2020</a>.</p>
</blockquote>
<p>Although the term ‘data science’ is ubiquitous in academia, industry, and even more generally, it is difficult to define. One deliberately antagonistic definition of data science is ‘[t]he inhumane reduction of humanity down to what can be counted’ <span class="citation">(<a href="references-1.html#ref-keyes2019" role="doc-biblioref">Keyes 2019</a>)</span>. While purposefully controversial, this definition highlights one reason for the increased demand for data science and quantitative methods over the past decade—individuals and their behaviour are now at the heart of it. Many of the techniques have been around for many decades, but what makes them popular now is this human focus.</p>
<p>Unfortunately, even though much of the work may be focused on individuals, issues of privacy and consent, and ethical concerns more broadly, rarely seem front of mind. While there are some exceptions, in general, even at the same time as claiming that AI, machine learning, and data science are going to revolutionise society, consideration of these types of issues appears to have been largely treated as something that would be nice to have, rather than something that we may like to think of before we embrace the revolution.</p>
<p>For the most part, these are not new issues. In the sciences, there has been considerable recent ethical consideration around CRISPR technology and gene editing, but in an earlier time similar conversations were had, for instance, about Wernher von Braun being allowed to building rockets for the US. In medicine, of course, these concerns have been front-of-mind for some time. Data science seems determined to have its own Tuskegee-moment rather than think about, and deal appropriately with, these issues, based on the experiences of other fields before they occur in data science.</p>
<p>That said, there is some evidence that data scientists are beginning to be more concerned about the ethics surrounding the practice. For instance, NeurIPS, a prestigious machine learning conference, now requires a statement on ethics to accompany all submissions.</p>
<blockquote>
<p>In order to provide a balanced perspective, authors are required to include a statement of the potential broader impact of their work, including its ethical aspects and future societal consequences. Authors should take care to discuss both positive and negative outcomes.</p>
<p><a href="https://neurips.cc/Conferences/2020/CallForPapers">NeurIPS 2020 Conference Call For Papers</a></p>
</blockquote>
<p>The purpose of ethical consideration and concern for the broader impact of our work is not to prescriptively rule things in or out, but to provide an opportunity to raise some issues that should be front of mind. The variety of data science applications, the relative youth of the field, and the speed of change, mean that such considerations are sometimes knowingly set aside, and this is acceptable to the rest of the field. This contrasts with fields such as science, medicine, engineering, and accounting. Possibly those fields are more self-aware (Figure <a href="r-essentials.html#fig:personalprobability">3.1</a>).</p>
<div class="figure">
<span style="display:block;" id="fig:personalprobability"></span>
<img src="figures/probability.png" alt="Probability, from https://xkcd.com/881/." width="90%"><p class="caption">
Figure 3.1: Probability, from <a href="https://xkcd.com/881/" class="uri">https://xkcd.com/881/</a>.
</p>
</div>
</div>
<div id="r-r-studio-and-r-studio-cloud" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> R, R Studio, and R Studio Cloud<a class="anchor" aria-label="anchor" href="#r-r-studio-and-r-studio-cloud"><i class="fas fa-link"></i></a>
</h2>
<p>R and R Studio are complementary, but they are not the same thing. Liza Bolton, Assistant Professor, Teaching Stream, Department of Statistical Sciences at the University of Toronto explains their relationship by analogy where R is like the engine and R Studio is like the car. Although some of us can use a car engine directly, most of us use a car to interact with the engine.</p>
<div id="r" class="section level3" number="3.3.1">
<h3>
<span class="header-section-number">3.3.1</span> R<a class="anchor" aria-label="anchor" href="#r"><i class="fas fa-link"></i></a>
</h3>
<p>R—<a href="https://www.r-project.org/---is" class="uri">https://www.r-project.org/---is</a> an open-source and free programming language that is focused on general statistics. Free in this context does not refer to a price of zero, but instead to ‘freedom,’ but it also does have a price of zero. This is in contrast with an open-source programming language that is designed for general purpose, such as Python, or an open-source programming language that is focused on probability, such as Stan. It was created by Ross Ihaka and Robert Gentleman at the University of Auckland. It is maintained by the R Core Team and changes to this ‘base’ of code occur methodically and with concern given to a variety of different priorities.</p>
<!-- If you are in Canada then you can download R here: http://cran.utstat.utoronto.ca/, if you are in Australia then you can download R here: https://cran.csiro.au/, otherwise you should go here - https://cran.r-project.org/mirrors.html - and find a location that suits you. (It doesn't really matter where you get it from, it's just that it may be slightly faster to use a closer option.) -->
<p>Many people build on this stable base, to extend the capabilities of R to better and more quickly suit their needs. They do this by creating packages. Typically, although not always, a package is a collection of R code, mostly functions, and this allows us to more easily do things that we want to do. These packages are managed by CRAN, and other repositories such as Bioconductor. CRAN is built into the download of R that you just got, so you can use it straight away.</p>
<p>If you want to use a package then you need to firstly install it in your computer, and then you need to load it when you want to use it.</p>
<p>Di Cook, Professor of Business Analytics at Monash University, describes this as analogous to a lightbulb. If you want light in your house, first you need to fit a lightbulb, and then you need to turn the switch on. Installing a package, say, <code>install.packages("tidyverse")</code>, is akin to fitting a lightbulb into a socket—you only need to do this once for each lightbulb. But then each time you want light you need to turn on the switch to the lightbulb, which in the R packages case, means calling the library, say, <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code>.</p>
<p>To install a package on your computer (again, we will need to do this only once per computer) we use the function <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></code></pre></div>
<p>And then when we want to use the package, we need to use the function <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<p>Having downloaded it, we can open R and use it directly. It is primarily designed to be interacted with through the command line. While this is functional, it can be useful to have a richer environment than the command line provides. In particular, it can be useful to install an Integrated Development Environment (IDE), which is an application that brings together various bits and pieces that will be used often. One common IDE for R is R Studio.</p>
</div>
<div id="r-studio" class="section level3" number="3.3.2">
<h3>
<span class="header-section-number">3.3.2</span> R Studio<a class="anchor" aria-label="anchor" href="#r-studio"><i class="fas fa-link"></i></a>
</h3>
<p>R Studio is distinct to R, and they are different entities. R Studio builds on top of R to make it easier to use R. This is in the same way that one could use the internet from the command line, but most folks use a browser such as Chrome, Firefox, or Safari.</p>
<p>R Studio is free in the sense that we do not pay for it. It is also free in the sense of being able to take the code, modify it, and distribute that code. But it is important to recognise that R Studio is a company and so it is possible that the current situation could change. It can be downloaded: <a href="https://www.rstudio.com/products/rstudio/" class="uri">https://www.rstudio.com/products/rstudio/</a>.</p>
<p>When we open R Studio it will look like Figure <a href="r-essentials.html#fig:first">3.2</a>.</p>
<div class="figure">
<span style="display:block;" id="fig:first"></span>
<img src="figures/01-03_r_essentials/01.png" alt="Opening R Studio for the first time" width="100%"><p class="caption">
Figure 3.2: Opening R Studio for the first time
</p>
</div>
<p>The left pane is a console in which you can type and execute R code line by line. Try it with 2+2 by clicking next to the prompt ‘&gt;’ and typing that out then pressing enter. The code that you type should be:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">2</span> <span class="op">+</span> <span class="fl">2</span>
<span class="co">#&gt; [1] 4</span></code></pre></div>
<p>And hopefully you get the same answer printed in the console.</p>
<p>The pane on the top right has information about your environment. For instance, when we create variables a list of their names and some properties will appear there. Try to type the following code, replacing my name with your name, next to the prompt, and again press enter:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_name</span> <span class="op">&lt;-</span> <span class="st">"Rohan"</span></code></pre></div>
<p>You should notice a new value in the environment pane with the variable name and its value.</p>
<p>The pane in the bottom right is a file manager. At the moment it should just have two files: an R History file and a R Project file. We will get to what these are later, but for now we will create and save a file.</p>
<p>Type out the following code (do not worry too much about the details for now):</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">my_name</span>, file <span class="op">=</span> <span class="st">"my_first_file.rds"</span><span class="op">)</span></code></pre></div>
<p>And you should see a new ‘.rds’ file in your list of files.</p>
</div>
<div id="r-studio-cloud" class="section level3" number="3.3.3">
<h3>
<span class="header-section-number">3.3.3</span> R Studio Cloud<a class="anchor" aria-label="anchor" href="#r-studio-cloud"><i class="fas fa-link"></i></a>
</h3>
<p>While you can and should download R Studio to your own computer, initially we will use R Studio Cloud: <a href="https://rstudio.cloud/" class="uri">https://rstudio.cloud/</a>. This is an online version that is provided by R Studio. We will use this so that you can focus on getting comfortable with R and R Studio in an environment that is consistent. This way you do not have to worry about what computer you have or installation permissions, amongst other things.</p>
<p>The free version of R Studio Cloud is free as is ‘no financial cost.’ The trade-off is that it is not very powerful, and it is sometimes slow, but for the purposes of getting started it is enough.</p>
</div>
</div>
<div id="getting-started" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> Getting started<a class="anchor" aria-label="anchor" href="#getting-started"><i class="fas fa-link"></i></a>
</h2>
<p>We will now start going through some code. It is important that you actively write this all out yourself.</p>
<p>While working line-by-line in the console is fine, it is easier to write out a whole script that can then be executed. We will do this by making an R Script. To do this go to: File -&gt; New File -&gt; R Script. The console pane will fall to the bottom left and an R Script will open in the top left. We will write some code that will get all of the Australian federal politicians and then construct a small table about the genders of the prime ministers.</p>
<p>(Some of this code will not make sense at this stage, but just type it all out to get in the habit and then run it. To run the whole script, we can click ‘Run’ or we can highlight certain lines and then click ‘Run’ to just run those lines.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Install the packages that we need</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"AustralianPoliticians"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load the packages that we need to use this time</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RohanAlexander/AustralianPoliticians">AustralianPoliticians</a></span><span class="op">)</span>

<span class="co"># Make a table of the counts of genders of the prime ministers</span>
<span class="fu">AustralianPoliticians</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/AustralianPoliticians/man/get_auspol.html">get_auspol</a></span><span class="op">(</span><span class="st">'all'</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">wasPrimeMinister</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 × 2</span>
<span class="co">#&gt;   gender     n</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 female     1</span>
<span class="co">#&gt; 2 male      29</span></code></pre></div>
<p>We can see that, as at the end of 2021, one female has been prime minister (Julia Gillard), while the other 29 prime ministers were male</p>
<p>One critical operator when programming is the ‘pipe’: <code>|&gt;</code>. We read this as ‘and then.’ This takes the output of a line of code and uses it as the first input to the next line of code. It makes code easier to read.</p>
<p>The idea of the pipe is that we take a dataset, and then, do something to it. We used this in the earlier example. Another example follows where we will look at the first six lines of a dataset by piping it to <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>. Notice that <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> does not explicitly take any arguments in this example. It knows which data to display because the pipe does it implicitly.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">AustralianPoliticians</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/AustralianPoliticians/man/get_auspol.html">get_auspol</a></span><span class="op">(</span><span class="st">'all'</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 20</span>
<span class="co">#&gt;   uniqueID   surname allOtherNames      firstName commonName</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;     </span>
<span class="co">#&gt; 1 Abbott1859 Abbott  Richard Hartley S… Richard   &lt;NA&gt;      </span>
<span class="co">#&gt; 2 Abbott1869 Abbott  Percy Phipps       Percy     &lt;NA&gt;      </span>
<span class="co">#&gt; 3 Abbott1877 Abbott  Macartney          Macartney Mac       </span>
<span class="co">#&gt; 4 Abbott1886 Abbott  Charles Lydiard A… Charles   Aubrey    </span>
<span class="co">#&gt; 5 Abbott1891 Abbott  Joseph Palmer      Joseph    &lt;NA&gt;      </span>
<span class="co">#&gt; 6 Abbott1957 Abbott  Anthony John       Anthony   Tony      </span>
<span class="co">#&gt; # … with 15 more variables: displayName &lt;chr&gt;,</span>
<span class="co">#&gt; #   earlierOrLaterNames &lt;chr&gt;, title &lt;chr&gt;, gender &lt;chr&gt;,</span>
<span class="co">#&gt; #   birthDate &lt;date&gt;, birthYear &lt;dbl&gt;, birthPlace &lt;chr&gt;,</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;, wikidataID &lt;chr&gt;,</span>
<span class="co">#&gt; #   wikipedia &lt;chr&gt;, adb &lt;chr&gt;, comments &lt;chr&gt;</span></code></pre></div>
<p>We can save this R Script as ‘my_first_r_script.R’ using File -&gt; Save As. At this point, our workspace should look something like Figure <a href="r-essentials.html#fig:third">3.3</a>.</p>
<div class="figure">
<span style="display:block;" id="fig:third"></span>
<img src="figures/01-03_r_essentials/03.png" alt="After running an R Script" width="100%"><p class="caption">
Figure 3.3: After running an R Script
</p>
</div>
<p>One thing to be aware of is that each R Studio Cloud workspace is essentially a new computer. Because of this, we need to install any package that we want to use for each workspace. For instance, before we can use the <code>tidyverse</code>, we need to install it with the function <code>install.packages("tidyverse")</code>. This contrasts with when you use your own computer.</p>
<p>A few final notes on R Studio Cloud:</p>
<ol style="list-style-type: decimal">
<li>In the Australian politician’s example, we got our data from the website GitHub using an R package, but we can get data into a workspace from a local computer in a variety of ways. One way is to use the ‘upload’ button in the ‘Files’ panel.</li>
<li>R Studio Cloud allows some degree of collaboration. For instance, you can give someone else access to a workspace that you create. This could be useful for collaborating on an assignment, although it is not quite full featured yet and you cannot both be in the workspace at the same time (in contrast to, say, Google Docs).</li>
<li>There are a variety of weaknesses of R Studio Cloud, in particular the RAM limits. Additionally, things break from time to time. The R Studio Community page that is focused on R Studio Cloud is sometimes helpful: <a href="https://community.rstudio.com/c/rstudio-cloud" class="uri">https://community.rstudio.com/c/rstudio-cloud</a>.</li>
</ol>
</div>
<div id="the-dplyr-verbs" class="section level2" number="3.5">
<h2>
<span class="header-section-number">3.5</span> The <code>dplyr</code> verbs<a class="anchor" aria-label="anchor" href="#the-dplyr-verbs"><i class="fas fa-link"></i></a>
</h2>
<p>One of the key packages that we will use is the <code>tidyverse</code> <span class="citation">(<a href="references-1.html#ref-tidyverse" role="doc-biblioref">Wickham et al. 2019b</a>)</span>. The <code>tidyverse</code> is actually a package of packages, which means when we install the <code>tidyverse</code>, we actually install a whole bunch of different packages. The key package in the <code>tidyverse</code> in terms of manipulating data is <code>dplyr</code> <span class="citation">(<a href="references-1.html#ref-citedplyr" role="doc-biblioref">Wickham et al. 2020</a>)</span>.</p>
<p>There are five <code>dplyr</code> functions that are regularly used, and we will now go through each of these. These are commonly referred to as the <code>dplyr</code> verbs.</p>
<ol style="list-style-type: decimal">
<li><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code></li>
<li><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code></li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> or equally <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code>
</li>
</ol>
<p>Two additional functions that we will cover here as they are closely related are <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code>.</p>
<p>As we have already installed the <code>tidyverse</code> we need to load it.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<p>And we will begin by again using some data about Australian politicians from the <code>AustralianPoliticians</code> package <span class="citation">(<a href="references-1.html#ref-citeaustralianpoliticians" role="doc-biblioref">R. Alexander and Hodgetts 2021</a>)</span>.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RohanAlexander/AustralianPoliticians">AustralianPoliticians</a></span><span class="op">)</span>

<span class="va">australian_politicians</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/AustralianPoliticians/man/get_auspol.html">get_auspol</a></span><span class="op">(</span><span class="st">'all'</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">australian_politicians</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 20</span>
<span class="co">#&gt;   uniqueID   surname allOtherNames      firstName commonName</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;     </span>
<span class="co">#&gt; 1 Abbott1859 Abbott  Richard Hartley S… Richard   &lt;NA&gt;      </span>
<span class="co">#&gt; 2 Abbott1869 Abbott  Percy Phipps       Percy     &lt;NA&gt;      </span>
<span class="co">#&gt; 3 Abbott1877 Abbott  Macartney          Macartney Mac       </span>
<span class="co">#&gt; 4 Abbott1886 Abbott  Charles Lydiard A… Charles   Aubrey    </span>
<span class="co">#&gt; 5 Abbott1891 Abbott  Joseph Palmer      Joseph    &lt;NA&gt;      </span>
<span class="co">#&gt; 6 Abbott1957 Abbott  Anthony John       Anthony   Tony      </span>
<span class="co">#&gt; # … with 15 more variables: displayName &lt;chr&gt;,</span>
<span class="co">#&gt; #   earlierOrLaterNames &lt;chr&gt;, title &lt;chr&gt;, gender &lt;chr&gt;,</span>
<span class="co">#&gt; #   birthDate &lt;date&gt;, birthYear &lt;dbl&gt;, birthPlace &lt;chr&gt;,</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;, wikidataID &lt;chr&gt;,</span>
<span class="co">#&gt; #   wikipedia &lt;chr&gt;, adb &lt;chr&gt;, comments &lt;chr&gt;</span></code></pre></div>
<div id="select" class="section level3" number="3.5.1">
<h3>
<span class="header-section-number">3.5.1</span> <code>select()</code><a class="anchor" aria-label="anchor" href="#select"><i class="fas fa-link"></i></a>
</h3>
<p>We use <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> to pick particular columns of a dataset. For instance, we might like to select the ‘firstName’ column.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">firstName</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 1</span>
<span class="co">#&gt;   firstName</span>
<span class="co">#&gt;   &lt;chr&gt;    </span>
<span class="co">#&gt; 1 Richard  </span>
<span class="co">#&gt; 2 Percy    </span>
<span class="co">#&gt; 3 Macartney</span>
<span class="co">#&gt; 4 Charles  </span>
<span class="co">#&gt; 5 Joseph   </span>
<span class="co">#&gt; 6 Anthony</span></code></pre></div>
<p>In R, there are many ways to do things. Sometimes they are different ways to do the same thing, and other times they are different ways to do almost the same thing. For instance, another way to pick a particular column of a dataset is to use the extract operator ‘$.’ This is from base, as opposed to <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> which is from the <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span><span class="op">$</span><span class="va">firstName</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "Richard"   "Percy"     "Macartney" "Charles"  </span>
<span class="co">#&gt; [5] "Joseph"    "Anthony"</span></code></pre></div>
<p>The two appear similar—both pick the ‘firstName’ column—but they different in the class of what they return. For the sake of completeness, if we combine <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> with <code><a href="https://dplyr.tidyverse.org/reference/pull.html">pull()</a></code> then we get the same class of output as if we had used the extract operator.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">firstName</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; [1] "Richard"   "Percy"     "Macartney" "Charles"  </span>
<span class="co">#&gt; [5] "Joseph"    "Anthony"</span></code></pre></div>
<p>We can also use <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> to remove columns. To do this, we <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> in a negative sense.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">firstName</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 19</span>
<span class="co">#&gt;   uniqueID   surname allOtherNames    commonName displayName</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;      </span>
<span class="co">#&gt; 1 Abbott1859 Abbott  Richard Hartley… &lt;NA&gt;       Abbott, Ri…</span>
<span class="co">#&gt; 2 Abbott1869 Abbott  Percy Phipps     &lt;NA&gt;       Abbott, Pe…</span>
<span class="co">#&gt; 3 Abbott1877 Abbott  Macartney        Mac        Abbott, Mac</span>
<span class="co">#&gt; 4 Abbott1886 Abbott  Charles Lydiard… Aubrey     Abbott, Au…</span>
<span class="co">#&gt; 5 Abbott1891 Abbott  Joseph Palmer    &lt;NA&gt;       Abbott, Jo…</span>
<span class="co">#&gt; 6 Abbott1957 Abbott  Anthony John     Tony       Abbott, To…</span>
<span class="co">#&gt; # … with 14 more variables: earlierOrLaterNames &lt;chr&gt;,</span>
<span class="co">#&gt; #   title &lt;chr&gt;, gender &lt;chr&gt;, birthDate &lt;date&gt;,</span>
<span class="co">#&gt; #   birthYear &lt;dbl&gt;, birthPlace &lt;chr&gt;, deathDate &lt;date&gt;,</span>
<span class="co">#&gt; #   member &lt;dbl&gt;, senator &lt;dbl&gt;, wasPrimeMinister &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wikidataID &lt;chr&gt;, wikipedia &lt;chr&gt;, adb &lt;chr&gt;,</span>
<span class="co">#&gt; #   comments &lt;chr&gt;</span></code></pre></div>
<p>Finally, we can use <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> based on conditions. For instance, we can <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> all of the columns that start with, say, ‘birth.’</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"birth"</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 3</span>
<span class="co">#&gt;   birthDate  birthYear birthPlace  </span>
<span class="co">#&gt;   &lt;date&gt;         &lt;dbl&gt; &lt;chr&gt;       </span>
<span class="co">#&gt; 1 NA              1859 Bendigo     </span>
<span class="co">#&gt; 2 1869-05-14        NA Hobart      </span>
<span class="co">#&gt; 3 1877-07-03        NA Murrurundi  </span>
<span class="co">#&gt; 4 1886-01-04        NA St Leonards </span>
<span class="co">#&gt; 5 1891-10-18        NA North Sydney</span>
<span class="co">#&gt; 6 1957-11-04        NA London</span></code></pre></div>
<p>There are a variety of similar ‘selection helpers’ including ‘starts_with(),’ ‘ends_with(),’ and ‘contains().’ More information about these is available in the help page for <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> which can be accessed with <code>?select()</code>.</p>
<p>At this point, we will use <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> to reduce the width of our dataset.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> <span class="op">&lt;-</span>
  <span class="va">australian_politicians</span> |&gt;
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">uniqueID</span>,
         <span class="va">surname</span>,
         <span class="va">firstName</span>,
         <span class="va">gender</span>,
         <span class="va">birthDate</span>,
         <span class="va">birthYear</span>,
         <span class="va">deathDate</span>,
         <span class="va">member</span>,
         <span class="va">senator</span>,
         <span class="va">wasPrimeMinister</span><span class="op">)</span>

<span class="va">australian_politicians</span>
<span class="co">#&gt; # A tibble: 1,783 × 10</span>
<span class="co">#&gt;    uniqueID   surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Abbott1859 Abbott  Richard   male   NA              1859</span>
<span class="co">#&gt;  2 Abbott1869 Abbott  Percy     male   1869-05-14        NA</span>
<span class="co">#&gt;  3 Abbott1877 Abbott  Macartney male   1877-07-03        NA</span>
<span class="co">#&gt;  4 Abbott1886 Abbott  Charles   male   1886-01-04        NA</span>
<span class="co">#&gt;  5 Abbott1891 Abbott  Joseph    male   1891-10-18        NA</span>
<span class="co">#&gt;  6 Abbott1957 Abbott  Anthony   male   1957-11-04        NA</span>
<span class="co">#&gt;  7 Abel1939   Abel    John      male   1939-06-25        NA</span>
<span class="co">#&gt;  8 Abetz1958  Abetz   Eric      male   1958-01-25        NA</span>
<span class="co">#&gt;  9 Adams1943  Adams   Judith    female 1943-04-11        NA</span>
<span class="co">#&gt; 10 Adams1951  Adams   Dick      male   1951-04-29        NA</span>
<span class="co">#&gt; # … with 1,773 more rows, and 4 more variables:</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="filter" class="section level3" number="3.5.2">
<h3>
<span class="header-section-number">3.5.2</span> <code>filter()</code><a class="anchor" aria-label="anchor" href="#filter"><i class="fas fa-link"></i></a>
</h3>
<p>We use <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to pick particular rows of a dataset. For instance, we might like to filter to only politicians that became prime minister.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">wasPrimeMinister</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 30 × 10</span>
<span class="co">#&gt;    uniqueID    surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Abbott1957  Abbott  Anthony   male   1957-11-04        NA</span>
<span class="co">#&gt;  2 Barton1849  Barton  Edmund    male   1849-01-18        NA</span>
<span class="co">#&gt;  3 Bruce1883   Bruce   Stanley   male   1883-04-15        NA</span>
<span class="co">#&gt;  4 Chifley1885 Chifley Joseph    male   1885-09-22        NA</span>
<span class="co">#&gt;  5 Cook1860    Cook    Joseph    male   1860-12-07        NA</span>
<span class="co">#&gt;  6 Curtin1885  Curtin  John      male   1885-01-08        NA</span>
<span class="co">#&gt;  7 Deakin1856  Deakin  Alfred    male   1856-08-03        NA</span>
<span class="co">#&gt;  8 Fadden1894  Fadden  Arthur    male   1894-04-13        NA</span>
<span class="co">#&gt;  9 Fisher1862  Fisher  Andrew    male   1862-08-29        NA</span>
<span class="co">#&gt; 10 Forde1890   Forde   Francis   male   1890-07-18        NA</span>
<span class="co">#&gt; # … with 20 more rows, and 4 more variables:</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>We could also pass <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> two conditions. For instance, we could look at politicians that become prime minister and were named Joseph, using the ‘and’ operator ‘&amp;.’</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">wasPrimeMinister</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">firstName</span> <span class="op">==</span> <span class="st">"Joseph"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 × 10</span>
<span class="co">#&gt;   uniqueID    surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Chifley1885 Chifley Joseph    male   1885-09-22        NA</span>
<span class="co">#&gt; 2 Cook1860    Cook    Joseph    male   1860-12-07        NA</span>
<span class="co">#&gt; 3 Lyons1879   Lyons   Joseph    male   1879-09-15        NA</span>
<span class="co">#&gt; # … with 4 more variables: deathDate &lt;date&gt;, member &lt;dbl&gt;,</span>
<span class="co">#&gt; #   senator &lt;dbl&gt;, wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>We would get the same result if we use a comma instead of an ampersand.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">wasPrimeMinister</span> <span class="op">==</span> <span class="fl">1</span>, <span class="va">firstName</span> <span class="op">==</span> <span class="st">"Joseph"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 × 10</span>
<span class="co">#&gt;   uniqueID    surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Chifley1885 Chifley Joseph    male   1885-09-22        NA</span>
<span class="co">#&gt; 2 Cook1860    Cook    Joseph    male   1860-12-07        NA</span>
<span class="co">#&gt; 3 Lyons1879   Lyons   Joseph    male   1879-09-15        NA</span>
<span class="co">#&gt; # … with 4 more variables: deathDate &lt;date&gt;, member &lt;dbl&gt;,</span>
<span class="co">#&gt; #   senator &lt;dbl&gt;, wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>Similarly, we could look at politicians who were named Myles or Ruth using the ‘or’ operator ‘|’</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">firstName</span> <span class="op">==</span> <span class="st">"Myles"</span> <span class="op">|</span> <span class="va">firstName</span> <span class="op">==</span> <span class="st">"Ruth"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 × 10</span>
<span class="co">#&gt;   uniqueID     surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Coleman1931  Coleman Ruth      female 1931-09-27        NA</span>
<span class="co">#&gt; 2 Ferricks1875 Ferric… Myles     male   1875-11-12        NA</span>
<span class="co">#&gt; 3 Webber1965   Webber  Ruth      female 1965-03-24        NA</span>
<span class="co">#&gt; # … with 4 more variables: deathDate &lt;date&gt;, member &lt;dbl&gt;,</span>
<span class="co">#&gt; #   senator &lt;dbl&gt;, wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>We could also pipe the result. For instance we could pipe from <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">firstName</span> <span class="op">==</span> <span class="st">"Ruth"</span> <span class="op">|</span> <span class="va">firstName</span> <span class="op">==</span> <span class="st">"Myles"</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">firstName</span>, <span class="va">surname</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 × 2</span>
<span class="co">#&gt;   firstName surname </span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;   </span>
<span class="co">#&gt; 1 Ruth      Coleman </span>
<span class="co">#&gt; 2 Myles     Ferricks</span>
<span class="co">#&gt; 3 Ruth      Webber</span></code></pre></div>
<p>If we happen to know the particular row number that is of interest then we could <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to only that particular row. For instance, say the row 853 was of interest.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">853</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 × 10</span>
<span class="co">#&gt;   uniqueID     surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Jakobsen1947 Jakobs… Carolyn   female 1947-09-11        NA</span>
<span class="co">#&gt; # … with 4 more variables: deathDate &lt;date&gt;, member &lt;dbl&gt;,</span>
<span class="co">#&gt; #   senator &lt;dbl&gt;, wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>There is also a dedicated function to do this, which is <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code></p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">853</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 × 10</span>
<span class="co">#&gt;   uniqueID     surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Jakobsen1947 Jakobs… Carolyn   female 1947-09-11        NA</span>
<span class="co">#&gt; # … with 4 more variables: deathDate &lt;date&gt;, member &lt;dbl&gt;,</span>
<span class="co">#&gt; #   senator &lt;dbl&gt;, wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>While this may seem somewhat esoteric, it is especially useful if we would like to remove a particular row using negation, or duplicate specific rows. For instance, we could remove the first row.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,782 × 10</span>
<span class="co">#&gt;    uniqueID    surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Abbott1869  Abbott  Percy     male   1869-05-14        NA</span>
<span class="co">#&gt;  2 Abbott1877  Abbott  Macartney male   1877-07-03        NA</span>
<span class="co">#&gt;  3 Abbott1886  Abbott  Charles   male   1886-01-04        NA</span>
<span class="co">#&gt;  4 Abbott1891  Abbott  Joseph    male   1891-10-18        NA</span>
<span class="co">#&gt;  5 Abbott1957  Abbott  Anthony   male   1957-11-04        NA</span>
<span class="co">#&gt;  6 Abel1939    Abel    John      male   1939-06-25        NA</span>
<span class="co">#&gt;  7 Abetz1958   Abetz   Eric      male   1958-01-25        NA</span>
<span class="co">#&gt;  8 Adams1943   Adams   Judith    female 1943-04-11        NA</span>
<span class="co">#&gt;  9 Adams1951   Adams   Dick      male   1951-04-29        NA</span>
<span class="co">#&gt; 10 Adamson1857 Adamson John      male   1857-02-18        NA</span>
<span class="co">#&gt; # … with 1,772 more rows, and 4 more variables:</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>We could also only, say, only keep the first three rows.</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 × 10</span>
<span class="co">#&gt;   uniqueID   surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Abbott1859 Abbott  Richard   male   NA              1859</span>
<span class="co">#&gt; 2 Abbott1869 Abbott  Percy     male   1869-05-14        NA</span>
<span class="co">#&gt; 3 Abbott1877 Abbott  Macartney male   1877-07-03        NA</span>
<span class="co">#&gt; # … with 4 more variables: deathDate &lt;date&gt;, member &lt;dbl&gt;,</span>
<span class="co">#&gt; #   senator &lt;dbl&gt;, wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>Finally, we could duplicate the first two rows.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,785 × 10</span>
<span class="co">#&gt;    uniqueID   surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Abbott1859 Abbott  Richard   male   NA              1859</span>
<span class="co">#&gt;  2 Abbott1869 Abbott  Percy     male   1869-05-14        NA</span>
<span class="co">#&gt;  3 Abbott1859 Abbott  Richard   male   NA              1859</span>
<span class="co">#&gt;  4 Abbott1869 Abbott  Percy     male   1869-05-14        NA</span>
<span class="co">#&gt;  5 Abbott1877 Abbott  Macartney male   1877-07-03        NA</span>
<span class="co">#&gt;  6 Abbott1886 Abbott  Charles   male   1886-01-04        NA</span>
<span class="co">#&gt;  7 Abbott1891 Abbott  Joseph    male   1891-10-18        NA</span>
<span class="co">#&gt;  8 Abbott1957 Abbott  Anthony   male   1957-11-04        NA</span>
<span class="co">#&gt;  9 Abel1939   Abel    John      male   1939-06-25        NA</span>
<span class="co">#&gt; 10 Abetz1958  Abetz   Eric      male   1958-01-25        NA</span>
<span class="co">#&gt; # … with 1,775 more rows, and 4 more variables:</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="arrange" class="section level3" number="3.5.3">
<h3>
<span class="header-section-number">3.5.3</span> <code>arrange()</code><a class="anchor" aria-label="anchor" href="#arrange"><i class="fas fa-link"></i></a>
</h3>
<p>We use <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> to change the order of the dataset based on the values of particular columns. For instance, could arrange ‘australian_politicians’ by their birthday.</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">birthDate</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,783 × 10</span>
<span class="co">#&gt;    uniqueID    surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Braddon1829 Braddon Edward    male   1829-06-11        NA</span>
<span class="co">#&gt;  2 Ferguson18… Fergus… John      male   1830-03-15        NA</span>
<span class="co">#&gt;  3 Zeal1830    Zeal    William   male   1830-12-05        NA</span>
<span class="co">#&gt;  4 Fraser1832  Fraser  Simon     male   1832-08-21        NA</span>
<span class="co">#&gt;  5 Groom1833   Groom   William   male   1833-03-09        NA</span>
<span class="co">#&gt;  6 Sargood1834 Sargood Frederick male   1834-05-30        NA</span>
<span class="co">#&gt;  7 Fysh1835    Fysh    Philip    male   1835-03-01        NA</span>
<span class="co">#&gt;  8 Playford18… Playfo… Thomas    male   1837-11-26        NA</span>
<span class="co">#&gt;  9 Solomon1839 Solomon Elias     male   1839-09-02        NA</span>
<span class="co">#&gt; 10 McLean1840  McLean  Allan     male   1840-02-03        NA</span>
<span class="co">#&gt; # … with 1,773 more rows, and 4 more variables:</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>We could modify <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> with <code><a href="https://dplyr.tidyverse.org/reference/desc.html">desc()</a></code> to change from ascending to descending order.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">birthDate</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,783 × 10</span>
<span class="co">#&gt;    uniqueID   surname  firstName gender birthDate  birthYear</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 SteeleJoh… Steele-… Jordon    male   1994-10-14        NA</span>
<span class="co">#&gt;  2 Chandler1… Chandler Claire    female 1990-06-01        NA</span>
<span class="co">#&gt;  3 Roy1990    Roy      Wyatt     male   1990-05-22        NA</span>
<span class="co">#&gt;  4 Thompson1… Thompson Phillip   male   1988-05-07        NA</span>
<span class="co">#&gt;  5 Paterson1… Paterson James     male   1987-11-21        NA</span>
<span class="co">#&gt;  6 Burns1987  Burns    Joshua    male   1987-02-06        NA</span>
<span class="co">#&gt;  7 Smith1986  Smith    Marielle  female 1986-12-30        NA</span>
<span class="co">#&gt;  8 Kakoschke… Kakosch… Skye      female 1985-12-19        NA</span>
<span class="co">#&gt;  9 Simmonds1… Simmonds Julian    male   1985-08-29        NA</span>
<span class="co">#&gt; 10 Gorman1984 Gorman   Patrick   male   1984-12-12        NA</span>
<span class="co">#&gt; # … with 1,773 more rows, and 4 more variables:</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>And we could arrange based on more than one column. For instance, if two politicians have the same first name, then we could arrange based on their birthday.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">firstName</span>, <span class="va">birthDate</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,783 × 10</span>
<span class="co">#&gt;    uniqueID    surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Blain1894   Blain   Adair     male   1894-11-21        NA</span>
<span class="co">#&gt;  2 Dein1889    Dein    Adam      male   1889-03-04        NA</span>
<span class="co">#&gt;  3 Armstrong1… Armstr… Adam      male   1909-07-01        NA</span>
<span class="co">#&gt;  4 Bandt1972   Bandt   Adam      male   1972-03-11        NA</span>
<span class="co">#&gt;  5 Ridgeway19… Ridgew… Aden      male   1962-09-18        NA</span>
<span class="co">#&gt;  6 Bennett1933 Bennett Adrian    male   1933-01-21        NA</span>
<span class="co">#&gt;  7 Gibson1935  Gibson  Adrian    male   1935-11-03        NA</span>
<span class="co">#&gt;  8 Wynne1850   Wynne   Agar      male   1850-01-15        NA</span>
<span class="co">#&gt;  9 Robertson1… Robert… Agnes     female 1882-07-31        NA</span>
<span class="co">#&gt; 10 Pittard1902 Pittard Alan      male   1902-11-15        NA</span>
<span class="co">#&gt; # … with 1,773 more rows, and 4 more variables:</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>We could achieve the same result with by using a pipe between two instances of <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>.</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">birthDate</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">firstName</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,783 × 10</span>
<span class="co">#&gt;    uniqueID    surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Blain1894   Blain   Adair     male   1894-11-21        NA</span>
<span class="co">#&gt;  2 Dein1889    Dein    Adam      male   1889-03-04        NA</span>
<span class="co">#&gt;  3 Armstrong1… Armstr… Adam      male   1909-07-01        NA</span>
<span class="co">#&gt;  4 Bandt1972   Bandt   Adam      male   1972-03-11        NA</span>
<span class="co">#&gt;  5 Ridgeway19… Ridgew… Aden      male   1962-09-18        NA</span>
<span class="co">#&gt;  6 Bennett1933 Bennett Adrian    male   1933-01-21        NA</span>
<span class="co">#&gt;  7 Gibson1935  Gibson  Adrian    male   1935-11-03        NA</span>
<span class="co">#&gt;  8 Wynne1850   Wynne   Agar      male   1850-01-15        NA</span>
<span class="co">#&gt;  9 Robertson1… Robert… Agnes     female 1882-07-31        NA</span>
<span class="co">#&gt; 10 Pittard1902 Pittard Alan      male   1902-11-15        NA</span>
<span class="co">#&gt; # … with 1,773 more rows, and 4 more variables:</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>When we use <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> it is important to be clear about precedence. For instance, changing to birthday and then first name would give a different arrangement.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">birthYear</span>, <span class="va">firstName</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,783 × 10</span>
<span class="co">#&gt;    uniqueID    surname firstName gender birthDate birthYear</span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Edwards1842 Edwards Richard   male   NA             1842</span>
<span class="co">#&gt;  2 Sawers1844  Sawers  William   male   NA             1844</span>
<span class="co">#&gt;  3 Barker1846  Barker  Stephen   male   NA             1846</span>
<span class="co">#&gt;  4 Corser1852  Corser  Edward    male   NA             1852</span>
<span class="co">#&gt;  5 Lee1856     Lee     Henry     male   NA             1856</span>
<span class="co">#&gt;  6 Grant1857   Grant   John      male   NA             1857</span>
<span class="co">#&gt;  7 Palmer1859  Palmer  Albert    male   NA             1859</span>
<span class="co">#&gt;  8 Riley1859   Riley   Edward    male   NA             1859</span>
<span class="co">#&gt;  9 Abbott1859  Abbott  Richard   male   NA             1859</span>
<span class="co">#&gt; 10 Kennedy1860 Kennedy Thomas    male   NA             1860</span>
<span class="co">#&gt; # … with 1,773 more rows, and 4 more variables:</span>
<span class="co">#&gt; #   deathDate &lt;date&gt;, member &lt;dbl&gt;, senator &lt;dbl&gt;,</span>
<span class="co">#&gt; #   wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
<p>A nice way to arrange by a variety of columns is to use <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code>. This means that we can specify a variety of columns. It also enables us to use the ‘selection helpers’ such as ‘starts_with()’ that were mentioned in association with <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">firstName</span>, <span class="va">birthYear</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 10</span>
<span class="co">#&gt;   uniqueID    surname  firstName gender birthDate  birthYear</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Blain1894   Blain    Adair     male   1894-11-21        NA</span>
<span class="co">#&gt; 2 Armstrong1… Armstro… Adam      male   1909-07-01        NA</span>
<span class="co">#&gt; 3 Bandt1972   Bandt    Adam      male   1972-03-11        NA</span>
<span class="co">#&gt; 4 Dein1889    Dein     Adam      male   1889-03-04        NA</span>
<span class="co">#&gt; 5 Ridgeway19… Ridgeway Aden      male   1962-09-18        NA</span>
<span class="co">#&gt; 6 Bennett1933 Bennett  Adrian    male   1933-01-21        NA</span>
<span class="co">#&gt; # … with 4 more variables: deathDate &lt;date&gt;, member &lt;dbl&gt;,</span>
<span class="co">#&gt; #   senator &lt;dbl&gt;, wasPrimeMinister &lt;dbl&gt;</span>

<span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">'birth'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 10</span>
<span class="co">#&gt;   uniqueID     surname firstName gender birthDate  birthYear</span>
<span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;  &lt;date&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Braddon1829  Braddon Edward    male   1829-06-11        NA</span>
<span class="co">#&gt; 2 Ferguson1830 Fergus… John      male   1830-03-15        NA</span>
<span class="co">#&gt; 3 Zeal1830     Zeal    William   male   1830-12-05        NA</span>
<span class="co">#&gt; 4 Fraser1832   Fraser  Simon     male   1832-08-21        NA</span>
<span class="co">#&gt; 5 Groom1833    Groom   William   male   1833-03-09        NA</span>
<span class="co">#&gt; 6 Sargood1834  Sargood Frederick male   1834-05-30        NA</span>
<span class="co">#&gt; # … with 4 more variables: deathDate &lt;date&gt;, member &lt;dbl&gt;,</span>
<span class="co">#&gt; #   senator &lt;dbl&gt;, wasPrimeMinister &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="mutate" class="section level3" number="3.5.4">
<h3>
<span class="header-section-number">3.5.4</span> <code>mutate()</code><a class="anchor" aria-label="anchor" href="#mutate"><i class="fas fa-link"></i></a>
</h3>
<p>We use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> when we want to make a new column. For instance, perhaps we want to make a new column that is 1 if a person was a member and a senator and 0 otherwise. That is to say that our new column would denote politicians that served in both the upper and the lower house.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> <span class="op">&lt;-</span> 
  <span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>was_both <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">member</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">senator</span> <span class="op">==</span> <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>

<span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">member</span>, <span class="va">senator</span>, <span class="va">was_both</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,783 × 3</span>
<span class="co">#&gt;    member senator was_both</span>
<span class="co">#&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1      0       1        0</span>
<span class="co">#&gt;  2      1       1        1</span>
<span class="co">#&gt;  3      0       1        0</span>
<span class="co">#&gt;  4      1       0        0</span>
<span class="co">#&gt;  5      1       0        0</span>
<span class="co">#&gt;  6      1       0        0</span>
<span class="co">#&gt;  7      1       0        0</span>
<span class="co">#&gt;  8      0       1        0</span>
<span class="co">#&gt;  9      0       1        0</span>
<span class="co">#&gt; 10      1       0        0</span>
<span class="co">#&gt; # … with 1,773 more rows</span></code></pre></div>
<p>We can use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> for math, such as addition and subtraction. For instance, we could calculate the age that the politicians are (or would have been) in 2022.</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> <span class="op">&lt;-</span> 
  <span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">2022</span> <span class="op">-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">birthDate</span><span class="op">)</span><span class="op">)</span>

<span class="va">australian_politicians</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">uniqueID</span>, <span class="va">age</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,783 × 2</span>
<span class="co">#&gt;    uniqueID     age</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Abbott1859    NA</span>
<span class="co">#&gt;  2 Abbott1869   153</span>
<span class="co">#&gt;  3 Abbott1877   145</span>
<span class="co">#&gt;  4 Abbott1886   136</span>
<span class="co">#&gt;  5 Abbott1891   131</span>
<span class="co">#&gt;  6 Abbott1957    65</span>
<span class="co">#&gt;  7 Abel1939      83</span>
<span class="co">#&gt;  8 Abetz1958     64</span>
<span class="co">#&gt;  9 Adams1943     79</span>
<span class="co">#&gt; 10 Adams1951     71</span>
<span class="co">#&gt; # … with 1,773 more rows</span></code></pre></div>
<p>There are a variety of functions that are especially useful when constructing new columns. These include <code><a href="https://rdrr.io/r/base/Log.html">log()</a></code> which will compute the natural logarithm, <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lead()</a></code> which will bring values up by one row, <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag()</a></code> which will push values down by one row, and <code><a href="https://rdrr.io/r/base/cumsum.html">cumsum()</a></code> which creates a cumulative sum of the column.</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">uniqueID</span>, <span class="va">age</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>log_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 3</span>
<span class="co">#&gt;   uniqueID     age log_age</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Abbott1859    NA   NA   </span>
<span class="co">#&gt; 2 Abbott1869   153    5.03</span>
<span class="co">#&gt; 3 Abbott1877   145    4.98</span>
<span class="co">#&gt; 4 Abbott1886   136    4.91</span>
<span class="co">#&gt; 5 Abbott1891   131    4.88</span>
<span class="co">#&gt; 6 Abbott1957    65    4.17</span>

<span class="va">australian_politicians</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">uniqueID</span>, <span class="va">age</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>lead_age <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lead</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 3</span>
<span class="co">#&gt;   uniqueID     age lead_age</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Abbott1859    NA      153</span>
<span class="co">#&gt; 2 Abbott1869   153      145</span>
<span class="co">#&gt; 3 Abbott1877   145      136</span>
<span class="co">#&gt; 4 Abbott1886   136      131</span>
<span class="co">#&gt; 5 Abbott1891   131       65</span>
<span class="co">#&gt; 6 Abbott1957    65       83</span>

<span class="va">australian_politicians</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">uniqueID</span>, <span class="va">age</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>lag_age <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 3</span>
<span class="co">#&gt;   uniqueID     age lag_age</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Abbott1859    NA      NA</span>
<span class="co">#&gt; 2 Abbott1869   153      NA</span>
<span class="co">#&gt; 3 Abbott1877   145     153</span>
<span class="co">#&gt; 4 Abbott1886   136     145</span>
<span class="co">#&gt; 5 Abbott1891   131     136</span>
<span class="co">#&gt; 6 Abbott1957    65     131</span>

<span class="va">australian_politicians</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">uniqueID</span>, <span class="va">age</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>cumulative_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 3</span>
<span class="co">#&gt;   uniqueID     age cumulative_age</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Abbott1869   153            153</span>
<span class="co">#&gt; 2 Abbott1877   145            298</span>
<span class="co">#&gt; 3 Abbott1886   136            434</span>
<span class="co">#&gt; 4 Abbott1891   131            565</span>
<span class="co">#&gt; 5 Abbott1957    65            630</span>
<span class="co">#&gt; 6 Abel1939      83            713</span></code></pre></div>
<p>Finally, we can also use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> in combination with <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code>, as we have in earlier examples, including the potential use of the ‘selection helpers.’ For instance, we could count the number of characters in both the first and last names at the same time.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">firstName</span>, <span class="va">surname</span><span class="op">)</span>, <span class="fu">stringr</span><span class="fu">::</span><span class="va"><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count</a></span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">uniqueID</span>, <span class="va">firstName</span>, <span class="va">surname</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,783 × 3</span>
<span class="co">#&gt;    uniqueID   firstName surname</span>
<span class="co">#&gt;    &lt;chr&gt;          &lt;int&gt;   &lt;int&gt;</span>
<span class="co">#&gt;  1 Abbott1859         7       6</span>
<span class="co">#&gt;  2 Abbott1869         5       6</span>
<span class="co">#&gt;  3 Abbott1877         9       6</span>
<span class="co">#&gt;  4 Abbott1886         7       6</span>
<span class="co">#&gt;  5 Abbott1891         6       6</span>
<span class="co">#&gt;  6 Abbott1957         7       6</span>
<span class="co">#&gt;  7 Abel1939           4       4</span>
<span class="co">#&gt;  8 Abetz1958          4       5</span>
<span class="co">#&gt;  9 Adams1943          6       5</span>
<span class="co">#&gt; 10 Adams1951          4       5</span>
<span class="co">#&gt; # … with 1,773 more rows</span></code></pre></div>
</div>
<div id="summarise" class="section level3" number="3.5.5">
<h3>
<span class="header-section-number">3.5.5</span> <code>summarise()</code><a class="anchor" aria-label="anchor" href="#summarise"><i class="fas fa-link"></i></a>
</h3>
<p>We use <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> when we would like to make new, condensed, summary variables. For instance, perhaps we would like to know what the minimum, average, or maximum of some column.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>youngest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
            oldest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
            average <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 × 3</span>
<span class="co">#&gt;   youngest oldest average</span>
<span class="co">#&gt;      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1       28    193    101.</span></code></pre></div>
<p>As an aside, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> are equivalent and we can use either and get the same result.</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>youngest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
            oldest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
            average <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 × 3</span>
<span class="co">#&gt;   youngest oldest average</span>
<span class="co">#&gt;      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1       28    193    101.</span></code></pre></div>
<p>By default, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> will provide one row of output for a whole dataset. For instance, in the earlier example we found the youngest, oldest, and average across all politicians. However, we can create more groups in our dataset using the function <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>. And we can then apply another function within the context of those groups. We could use many functions on the basis of groups, but the <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> function is particularly powerful in conjunction with <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>. For instance, we could <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> by gender, and then get our age-based summary statistics.</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>youngest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
            oldest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
            average <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 × 4</span>
<span class="co">#&gt;   gender youngest oldest average</span>
<span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 female       32    140    66.0</span>
<span class="co">#&gt; 2 male         28    193   106.</span></code></pre></div>
<p>Similarly, we could look at youngest, oldest, and mean age at death by gender.</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt;
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>days_lived <span class="op">=</span> <span class="va">deathDate</span> <span class="op">-</span> <span class="va">birthDate</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>
    min_days <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span>,
    mean_days <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span> |&gt; <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">)</span>,
    max_days <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span>
    <span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 × 4</span>
<span class="co">#&gt;   gender min_days   mean_days  max_days  </span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;drtn&gt;     &lt;drtn&gt;     &lt;drtn&gt;    </span>
<span class="co">#&gt; 1 female 14856 days 28857 days 35560 days</span>
<span class="co">#&gt; 2 male   12380 days 27376 days 36416 days</span></code></pre></div>
<p>And so we learn that female members of parliament on average lived slightly longer than male members of parliament.</p>
<p>We can use <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> on the basis of more than one group. For instance, looking again at average number of days lived by gender, but also by house.</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt;
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>days_lived <span class="op">=</span> <span class="va">deathDate</span> <span class="op">-</span> <span class="va">birthDate</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">member</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>
    min_days <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span>,
    mean_days <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span> |&gt; <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">)</span>,
    max_days <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span>
    <span class="op">)</span>
<span class="co">#&gt; # A tibble: 4 × 5</span>
<span class="co">#&gt; # Groups:   gender [2]</span>
<span class="co">#&gt;   gender member min_days   mean_days  max_days  </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;drtn&gt;     &lt;drtn&gt;     &lt;drtn&gt;    </span>
<span class="co">#&gt; 1 female      0 21746 days 29517 days 35560 days</span>
<span class="co">#&gt; 2 female      1 14856 days 27538 days 33442 days</span>
<span class="co">#&gt; 3 male        0 13619 days 27133 days 36416 days</span>
<span class="co">#&gt; 4 male        1 12380 days 27496 days 36328 days</span></code></pre></div>
<p>We can use the function <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> to create counts by groups. For instance, the number of politicians by gender.</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 × 2</span>
<span class="co">#&gt; # Groups:   gender [2]</span>
<span class="co">#&gt;   gender     n</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 female   240</span>
<span class="co">#&gt; 2 male    1543</span></code></pre></div>
<p>In addition to the <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code>, we could make a proportion if we wanted to.</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>proportion <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 × 3</span>
<span class="co">#&gt;   gender     n proportion</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 female   240      0.135</span>
<span class="co">#&gt; 2 male    1543      0.865</span></code></pre></div>
<p>The function <code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> is essentially the same as using <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and then <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>. For instance, we can get the same result.</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 × 2</span>
<span class="co">#&gt;   gender     n</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 female   240</span>
<span class="co">#&gt; 2 male    1543</span></code></pre></div>
<p>And there is a similarly helpful function for <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, which is <code><a href="https://dplyr.tidyverse.org/reference/count.html">add_count()</a></code>. The difference is that the number will be added in a column.</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">add_count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">uniqueID</span>, <span class="va">gender</span>, <span class="va">n</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,783 × 3</span>
<span class="co">#&gt; # Groups:   gender [2]</span>
<span class="co">#&gt;    uniqueID   gender     n</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;  &lt;int&gt;</span>
<span class="co">#&gt;  1 Abbott1859 male    1543</span>
<span class="co">#&gt;  2 Abbott1869 male    1543</span>
<span class="co">#&gt;  3 Abbott1877 male    1543</span>
<span class="co">#&gt;  4 Abbott1886 male    1543</span>
<span class="co">#&gt;  5 Abbott1891 male    1543</span>
<span class="co">#&gt;  6 Abbott1957 male    1543</span>
<span class="co">#&gt;  7 Abel1939   male    1543</span>
<span class="co">#&gt;  8 Abetz1958  male    1543</span>
<span class="co">#&gt;  9 Adams1943  female   240</span>
<span class="co">#&gt; 10 Adams1951  male    1543</span>
<span class="co">#&gt; # … with 1,773 more rows</span></code></pre></div>
</div>
</div>
<div id="base" class="section level2" number="3.6">
<h2>
<span class="header-section-number">3.6</span> Base<a class="anchor" aria-label="anchor" href="#base"><i class="fas fa-link"></i></a>
</h2>
<div id="class" class="section level3" number="3.6.1">
<h3>
<span class="header-section-number">3.6.1</span> Class<a class="anchor" aria-label="anchor" href="#class"><i class="fas fa-link"></i></a>
</h3>
<p>A class is the broader type of object that something is. For instance, your class is probably ‘human,’ which is itself an ‘animal.’ Similarly, if we create a number in R we can use <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> to work out its class, which in this case will be numeric.</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_number</span> <span class="op">&lt;-</span> <span class="fl">8</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">my_number</span><span class="op">)</span>
<span class="co">#&gt; [1] "numeric"</span></code></pre></div>
<p>Or we could make it a character.</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_name</span> <span class="op">&lt;-</span> <span class="st">"rohan"</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">my_name</span><span class="op">)</span>
<span class="co">#&gt; [1] "character"</span></code></pre></div>
<p>Finally, we can often coerce classes to be something else.</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_number_as_character</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">my_number</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">my_number_as_character</span><span class="op">)</span>
<span class="co">#&gt; [1] "character"</span></code></pre></div>
<p>There are many ways for your code to not run but having an issue with the classes is the almost always the first thing to check.</p>
</div>
<div id="simulating-data" class="section level3" number="3.6.2">
<h3>
<span class="header-section-number">3.6.2</span> Simulating data<a class="anchor" aria-label="anchor" href="#simulating-data"><i class="fas fa-link"></i></a>
</h3>
<p>Simulating data is a key skill for statistics. We will use the following functions all the time: <code><a href="https://rdrr.io/r/stats/Normal.html">rnorm()</a></code>, <code><a href="https://rdrr.io/r/base/sample.html">sample()</a></code>, and <code><a href="https://rdrr.io/r/stats/Uniform.html">runif()</a></code>. Arguably the most important function is <code><a href="https://rdrr.io/r/base/Random.html">set.seed()</a></code>, which we need because while we want our data to be random, we want it to be repeatable.</p>
<p>Let’s get 10 observations from the standard normal.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">853</span><span class="op">)</span>

<span class="va">number_of_observations</span> <span class="op">&lt;-</span> <span class="fl">10</span>

<span class="va">simulated_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>person <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">number_of_observations</span><span class="op">)</span>,
                         observation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">number_of_observations</span>, 
                                             mean <span class="op">=</span> <span class="fl">0</span>, 
                                             sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
                         <span class="op">)</span></code></pre></div>
<p>Then let’s add 10 draws from the uniform distribution between 0 and 10.</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">simulated_data</span><span class="op">$</span><span class="va">another_observation</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">number_of_observations</span>, 
                                            min <span class="op">=</span> <span class="fl">0</span>, 
                                            max <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<p>Finally, let’s use sample, which allows use to pick from a list of items, to add a favourite colour to each observation.</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">simulated_data</span><span class="op">$</span><span class="va">fav_colour</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">" white "</span><span class="op">)</span>, 
                                    size <span class="op">=</span> <span class="va">number_of_observations</span>,
                                    replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>We set the option <code>replace</code> to <code>TRUE</code> because we are only choosing between two items, but we want ten outcomes. Depending on the simulation you should think about whether you need it <code>TRUE</code> or <code>FALSE</code>. Also, there is another useful option to adjust the probability with which each item is drawn. In particular, the default is that both options are equally likely, but perhaps we might like to have 10 per cent <code>blue</code> with 90 per cent <code>white</code>. The way to do this is to set the option <code>prob</code>. As always with functions, you can find more in the help with <code><a href="https://rdrr.io/r/base/sample.html">?sample</a></code>.</p>
</div>
<div id="functions" class="section level3" number="3.6.3">
<h3>
<span class="header-section-number">3.6.3</span> Functions<a class="anchor" aria-label="anchor" href="#functions"><i class="fas fa-link"></i></a>
</h3>
<p>There are a lot of functions in R, and almost any common task that you might need to do is likely already done. But you will need to write your own functions. The way to do this is to define a function and give it a name. Your function will probably have some inputs (note that these inputs can have default values). Your function will then do something with these inputs and then return something.</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_function</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">some_names</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">some_names</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu">my_function</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rohan"</span>, <span class="st">"monica"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "rohan"  "monica"</span></code></pre></div>
</div>
</div>
<div id="ggplot" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> ggplot<a class="anchor" aria-label="anchor" href="#ggplot"><i class="fas fa-link"></i></a>
</h2>
<p>If the key package in the <code>tidyverse</code> in terms of manipulating data is <code>dplyr</code> <span class="citation">(<a href="references-1.html#ref-citedplyr" role="doc-biblioref">Wickham et al. 2020</a>)</span>, then the key package in the <code>tidyverse</code> in terms of creating graphs is <code>ggplot2</code> <span class="citation">(<a href="references-1.html#ref-citeggplot" role="doc-biblioref">Wickham 2016</a>)</span>.</p>
<p>The <code>ggplot</code> package is the plotting package that is part of the <code>tidyverse</code> collection of packages.</p>
<p>In a similar way to piping, it works in layers. But instead of using the pipe (<code>|&gt;</code>) ggplot uses <code>+</code>.</p>
<div id="main-features" class="section level3" number="3.7.1">
<h3>
<span class="header-section-number">3.7.1</span> Main features<a class="anchor" aria-label="anchor" href="#main-features"><i class="fas fa-link"></i></a>
</h3>
<p>There are three key aspects:</p>
<ol style="list-style-type: decimal">
<li>data;</li>
<li>aesthetics / mapping; and</li>
<li>type.</li>
</ol>
<p>For instances, let’s build up a histogram of age of death with increasing complexity.</p>
<p>Starts with a grey box:</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>days_lived <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="va">deathDate</span> <span class="op">-</span> <span class="va">birthDate</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">days_lived</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-r_essentials_files/figure-html/unnamed-chunk-54-1.png" width="672"></div>
<p>We need to tell it what we want to plot. This is where <code>geom</code> comes in</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>days_lived <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="va">deathDate</span> <span class="op">-</span> <span class="va">birthDate</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">days_lived</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">365</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-r_essentials_files/figure-html/unnamed-chunk-55-1.png" width="672"></div>
<p>Now let’s color the bars by gender, which means adding an aesthetic.</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>days_lived <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="va">deathDate</span> <span class="op">-</span> <span class="va">birthDate</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">days_lived</span>, fill <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">365</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-r_essentials_files/figure-html/unnamed-chunk-56-1.png" width="672"></div>
<p>We can add some labels, change the color, and background.</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>days_lived <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="va">deathDate</span> <span class="op">-</span> <span class="va">birthDate</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">days_lived</span>, fill <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">365</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Length of life of Australian politicians"</span>, 
       x <span class="op">=</span> <span class="st">"Age of deaths (days)"</span>, 
       y <span class="op">=</span> <span class="st">"Number"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set1"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-r_essentials_files/figure-html/unnamed-chunk-57-1.png" width="672"></div>
<p>I forget who said this but, ‘<code>ggplot</code> makes it so easy to have nicely labelled axes, there’s no real excuse not to.’</p>
</div>
<div id="facets" class="section level3" number="3.7.2">
<h3>
<span class="header-section-number">3.7.2</span> Facets<a class="anchor" aria-label="anchor" href="#facets"><i class="fas fa-link"></i></a>
</h3>
<p>Facets are subplots and are invaluable because they allow you to add another variable to your plot without having to make a 3D plot.</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">australian_politicians</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>days_lived <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="va">deathDate</span> <span class="op">-</span> <span class="va">birthDate</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">days_lived</span><span class="op">)</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">days_lived</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">365</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Length of life of Australian politicians"</span>, 
       x <span class="op">=</span> <span class="st">"Age of deaths (days)"</span>, 
       y <span class="op">=</span> <span class="st">"Number"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set1"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">gender</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="03-r_essentials_files/figure-html/unnamed-chunk-58-1.png" width="672"></div>
</div>
</div>
<div id="exploring-the-tidyverse" class="section level2" number="3.8">
<h2>
<span class="header-section-number">3.8</span> Exploring the tidyverse<a class="anchor" aria-label="anchor" href="#exploring-the-tidyverse"><i class="fas fa-link"></i></a>
</h2>
<div id="tibbles" class="section level3" number="3.8.1">
<h3>
<span class="header-section-number">3.8.1</span> Tibbles<a class="anchor" aria-label="anchor" href="#tibbles"><i class="fas fa-link"></i></a>
</h3>
<p>A tibble is a data frame, but it is a data frame with some particular changes that make it easier to work with. You should read Chapter 10 of <span class="citation"><a href="references-1.html#ref-r4ds" role="doc-biblioref">Wickham and Grolemund</a> (<a href="references-1.html#ref-r4ds" role="doc-biblioref">2017</a>)</span> for more detail. The main difference is that compared with a dataframe, a tibble doesn’t convert strings to factors, and it prints nicely, including letting you know the class of a column.</p>
<p>You can make a tibble manually if you need, for instance this can be handy for simulating data, but usually we will just import data as a tibble.</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">people</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rohan"</span>, <span class="st">"monica"</span><span class="op">)</span>,
         website <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rohanalexander.com"</span>, <span class="st">"monicaalexander.com"</span><span class="op">)</span>,
         fav_colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">" white "</span><span class="op">)</span>,
         <span class="op">)</span>
<span class="va">people</span>
<span class="co">#&gt; # A tibble: 2 × 3</span>
<span class="co">#&gt;   names  website             fav_colour</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;               &lt;chr&gt;     </span>
<span class="co">#&gt; 1 rohan  rohanalexander.com  "blue"    </span>
<span class="co">#&gt; 2 monica monicaalexander.com " white "</span></code></pre></div>
</div>
<div id="importing-data" class="section level3" number="3.8.2">
<h3>
<span class="header-section-number">3.8.2</span> Importing data<a class="anchor" aria-label="anchor" href="#importing-data"><i class="fas fa-link"></i></a>
</h3>
<p>There are a variety of ways to import data. If you are dealing with CSV files then try <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> in the first instance. There were examples of that in earlier sections.</p>
</div>
<div id="joining-data" class="section level3" number="3.8.3">
<h3>
<span class="header-section-number">3.8.3</span> Joining data<a class="anchor" aria-label="anchor" href="#joining-data"><i class="fas fa-link"></i></a>
</h3>
<p>We can join two datasets together in a variety of ways. The most common join that I use is <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join()</a></code>, where I have one main dataset and I want to join another to it based on some common column names. Here we’ll join two datasets based on favourite colour.</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">both</span> <span class="op">&lt;-</span> 
  <span class="va">simulated_data</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">people</span>, by <span class="op">=</span> <span class="st">"fav_colour"</span><span class="op">)</span>

<span class="va">both</span>
<span class="co">#&gt; # A tibble: 10 × 6</span>
<span class="co">#&gt;    person observation another_observation fav_colour names </span>
<span class="co">#&gt;     &lt;int&gt;       &lt;dbl&gt;               &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt; </span>
<span class="co">#&gt;  1      1     -0.360                9.52  "blue"     rohan </span>
<span class="co">#&gt;  2      2     -0.0406               0.586 " white "  monica</span>
<span class="co">#&gt;  3      3     -1.78                 2.48  "blue"     rohan </span>
<span class="co">#&gt;  4      4     -1.12                 5.80  " white "  monica</span>
<span class="co">#&gt;  5      5     -1.00                 5.26  "blue"     rohan </span>
<span class="co">#&gt;  6      6      1.78                 4.09  "blue"     rohan </span>
<span class="co">#&gt;  7      7     -1.39                 3.97  "blue"     rohan </span>
<span class="co">#&gt;  8      8     -0.497                2.52  " white "  monica</span>
<span class="co">#&gt;  9      9     -0.558                6.29  "blue"     rohan </span>
<span class="co">#&gt; 10     10     -0.824                8.57  "blue"     rohan </span>
<span class="co">#&gt; # … with 1 more variable: website &lt;chr&gt;</span></code></pre></div>
</div>
<div id="strings" class="section level3" number="3.8.4">
<h3>
<span class="header-section-number">3.8.4</span> Strings<a class="anchor" aria-label="anchor" href="#strings"><i class="fas fa-link"></i></a>
</h3>
<p>We’ve seen a string earlier, but it is an object that is created with single or double quotes. String manipulation is an entire book in itself, but you should start with the stringr package <span class="citation">(<a href="references-1.html#ref-citestringr" role="doc-biblioref">Wickham 2019e</a>)</span>.</p>
<p>I’ll just cover a few essentials: <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">stringr::str_detect()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">stringr::str_replace()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_trim.html">stringr::str_squish()</a></code>.</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">people</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 × 3</span>
<span class="co">#&gt;   names  website             fav_colour</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;               &lt;chr&gt;     </span>
<span class="co">#&gt; 1 rohan  rohanalexander.com  "blue"    </span>
<span class="co">#&gt; 2 monica monicaalexander.com " white "</span>

<span class="va">people</span> <span class="op">&lt;-</span> 
  <span class="va">people</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>is_rohan <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">names</span>, <span class="st">"rohan"</span><span class="op">)</span>,
         make_howlett <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">website</span>, <span class="st">"alexander"</span>, <span class="st">"howlett"</span><span class="op">)</span>,
         fav_colour_trim <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_trim.html">str_squish</a></span><span class="op">(</span><span class="va">fav_colour</span><span class="op">)</span>
         <span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">people</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 × 6</span>
<span class="co">#&gt;   names  website         fav_colour is_rohan make_howlett   </span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;      &lt;lgl&gt;    &lt;chr&gt;          </span>
<span class="co">#&gt; 1 rohan  rohanalexander… "blue"     TRUE     rohanhowlett.c…</span>
<span class="co">#&gt; 2 monica monicaalexande… " white "  FALSE    monicahowlett.…</span>
<span class="co">#&gt; # … with 1 more variable: fav_colour_trim &lt;chr&gt;</span></code></pre></div>
</div>
<div id="pivot" class="section level3" number="3.8.5">
<h3>
<span class="header-section-number">3.8.5</span> Pivot<a class="anchor" aria-label="anchor" href="#pivot"><i class="fas fa-link"></i></a>
</h3>
<p>Datasets tend to be either long or wide. Generally, in the tidyverse, and certainly for ggplot, we need long data. To go from one to the other you can use the <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code> and <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a></code> functions.</p>
<p>Let’s see an example with some data on whether red team or blue team won a competition in some year.</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pivot_example_data</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">2020</span>, <span class="fl">2021</span><span class="op">)</span>,
         blue_team <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>,
         red_team <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">pivot_example_data</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 × 3</span>
<span class="co">#&gt;    year blue_team red_team</span>
<span class="co">#&gt;   &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1  2019         1        2</span>
<span class="co">#&gt; 2  2020         2        1</span>
<span class="co">#&gt; 3  2021         1        2</span></code></pre></div>
<p>This dataset is in wide format at the moment. To get it into long format, what we’d like is to have a column that specifies the team, and then another that specifies the result. We’ll use <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">tidyr::pivot_longer</a></code>.</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_pivoted_longer</span> <span class="op">&lt;-</span> 
  <span class="va">pivot_example_data</span> |&gt; 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"blue_team"</span>, <span class="st">"red_team"</span><span class="op">)</span>,
              names_to <span class="op">=</span> <span class="st">"team"</span>,
               values_to <span class="op">=</span> <span class="st">"position"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_pivoted_longer</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 3</span>
<span class="co">#&gt;    year team      position</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt; 1  2019 blue_team        1</span>
<span class="co">#&gt; 2  2019 red_team         2</span>
<span class="co">#&gt; 3  2020 blue_team        2</span>
<span class="co">#&gt; 4  2020 red_team         1</span>
<span class="co">#&gt; 5  2021 blue_team        1</span>
<span class="co">#&gt; 6  2021 red_team         2</span></code></pre></div>
<p>Occasionally, you’ll need to go from long data to wide data. We accomplish this with <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">tidyr::pivot_wider</a></code>.</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_pivoted_wider</span> <span class="op">&lt;-</span> 
  <span class="va">data_pivoted_longer</span> |&gt; 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="st">"team"</span><span class="op">)</span>,
                     names_from <span class="op">=</span> <span class="st">"team"</span>,
                     values_from <span class="op">=</span> <span class="st">"position"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">data_pivoted_wider</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 × 3</span>
<span class="co">#&gt;    year blue_team red_team</span>
<span class="co">#&gt;   &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt; 1  2019         1        2</span>
<span class="co">#&gt; 2  2020         2        1</span>
<span class="co">#&gt; 3  2021         1        2</span></code></pre></div>
</div>
<div id="factors" class="section level3" number="3.8.6">
<h3>
<span class="header-section-number">3.8.6</span> Factors<a class="anchor" aria-label="anchor" href="#factors"><i class="fas fa-link"></i></a>
</h3>
<p>A factor is a string that has an inherent ordering. For instance, the days of the week have an order - Monday, Tuesday, Wednesday,… - which is not alphabetical. Factors feature prominently in base, but they often add more complication than they are worth and so the tidyverse gives them a less prominent role. Nonetheless taking advantage of factors is useful in certain circumstances, for instance when plotting the days of the week we probably want them in the usual ordering than in the alphabetical ordering that would result if we had them as characters. The package that we use to deal with factors is <code>forcats</code> <span class="citation">(<a href="references-1.html#ref-citeforcats" role="doc-biblioref">Wickham 2020a</a>)</span>.</p>
<p>Sometimes you will have a character vector and you will want it ordered in a particular way. The default is that a character vector is ordered alphabetically, but you may not want that, for instance, the days of the week would look strange on a graph if they were alphabetically ordered: Friday, Monday, Saturday, Sunday, Thursday, Tuesday, Wednesday!</p>
<p>The way to change the ordering is to change the variable from a character to a factor. I would then use the <code>forcats</code> package to specify an ordering by hand. The help page is here: <a href="https://forcats.tidyverse.org/reference/fct_relevel.html" class="uri">https://forcats.tidyverse.org/reference/fct_relevel.html</a>.</p>
<p>Let’s look at a concrete example.</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>all_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Rohan"</span>, <span class="st">"Monica"</span>, <span class="st">"Edward"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>If we plotted this then Edward would be first, because it would be alphabetical. But if instead I want to be first as I am the oldest then we could use <code>forcats</code> in the following way.</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org">forcats</a></span><span class="op">)</span> <span class="co"># (BTW you'll probably have to install that one)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>

<span class="va">my_data</span> <span class="op">&lt;-</span>
  <span class="va">my_data</span> |&gt;
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>all_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">all_names</span><span class="op">)</span>, <span class="co"># Change to factor</span>
         all_names_releveled <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">all_names</span>, <span class="st">"Rohan"</span>, <span class="st">"Monica"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Change the levels</span>

<span class="co"># Then compare the two</span>
<span class="va">my_data</span><span class="op">$</span><span class="va">all_names</span>
<span class="co">#&gt; [1] Rohan  Monica Edward</span>
<span class="co">#&gt; Levels: Edward Monica Rohan</span>
<span class="va">my_data</span><span class="op">$</span><span class="va">all_names_releveled</span>
<span class="co">#&gt; [1] Rohan  Monica Edward</span>
<span class="co">#&gt; Levels: Rohan Monica Edward</span></code></pre></div>
</div>
<div id="cases" class="section level3" number="3.8.7">
<h3>
<span class="header-section-number">3.8.7</span> Cases<a class="anchor" aria-label="anchor" href="#cases"><i class="fas fa-link"></i></a>
</h3>
<p>If you need to write a few conditional statements, then <code>case_when</code> is the way to go.</p>
<p>Let’s start with a tibble of dates and pretend that we want to group them into ‘pre-1950,’ ‘1950-2000,’ ‘2000-onwards’</p>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">case_when_example</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>some_dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1909-12-31"</span>, <span class="st">"1919-12-31"</span>, <span class="st">"1929-12-31"</span>, <span class="st">"1939-12-31"</span>, 
                        <span class="st">"1949-12-31"</span>, <span class="st">"1959-12-31"</span>, <span class="st">"1969-12-31"</span>, <span class="st">"1979-12-31"</span>, 
                        <span class="st">"1989-12-31"</span>, <span class="st">"1999-12-31"</span>, <span class="st">"2009-12-31"</span><span class="op">)</span>
         <span class="op">)</span>

<span class="va">case_when_example</span> <span class="op">&lt;-</span> 
  <span class="va">case_when_example</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>some_dates <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="va">some_dates</span><span class="op">)</span>
         <span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">case_when_example</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 1</span>
<span class="co">#&gt;   some_dates</span>
<span class="co">#&gt;   &lt;date&gt;    </span>
<span class="co">#&gt; 1 1909-12-31</span>
<span class="co">#&gt; 2 1919-12-31</span>
<span class="co">#&gt; 3 1929-12-31</span>
<span class="co">#&gt; 4 1939-12-31</span>
<span class="co">#&gt; 5 1949-12-31</span>
<span class="co">#&gt; 6 1959-12-31</span></code></pre></div>
<p>Now we’ll use <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">dplyr::case_when()</a></code> to group these.</p>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">case_when_example</span> <span class="op">&lt;-</span> 
  <span class="va">case_when_example</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>year_group <span class="op">=</span> 
           <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span>
             <span class="va">some_dates</span> <span class="op">&lt;</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"1950-01-01"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"pre-1950"</span>,
             <span class="va">some_dates</span> <span class="op">&lt;</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2000-01-01"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"1950-2000"</span>,
             <span class="va">some_dates</span> <span class="op">&gt;=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2000-01-01"</span><span class="op">)</span> <span class="op">~</span> <span class="st">"2000-onwards"</span>,
             <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"CHECK ME"</span>
             <span class="op">)</span>
  <span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">case_when_example</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 × 2</span>
<span class="co">#&gt;   some_dates year_group</span>
<span class="co">#&gt;   &lt;date&gt;     &lt;chr&gt;     </span>
<span class="co">#&gt; 1 1909-12-31 pre-1950  </span>
<span class="co">#&gt; 2 1919-12-31 pre-1950  </span>
<span class="co">#&gt; 3 1929-12-31 pre-1950  </span>
<span class="co">#&gt; 4 1939-12-31 pre-1950  </span>
<span class="co">#&gt; 5 1949-12-31 pre-1950  </span>
<span class="co">#&gt; 6 1959-12-31 1950-2000</span></code></pre></div>
<p>We could accomplish this with a series of <code>if_else</code> statements, but <code>case_when</code> is just a bit cleaner. The only thing to be aware of is that statements are evaluated in order. So as soon as something matches it doesn’t continue down the list of conditions. That’s why we have that catch-all at the end - if the date doesn’t fit any of the earlier conditions, then we’ve got a problem and want to know about it.</p>
</div>
</div>
<div id="dealing-with-errors" class="section level2" number="3.9">
<h2>
<span class="header-section-number">3.9</span> Dealing with errors<a class="anchor" aria-label="anchor" href="#dealing-with-errors"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>When you are programming, eventually your code will break, when I say eventually, I mean like probably 10 or 20 times a day.</p>
<p><span class="citation"><a href="references-1.html#ref-sharlatalks" role="doc-biblioref">Gelfand</a> (<a href="references-1.html#ref-sharlatalks" role="doc-biblioref">2021</a>)</span></p>
</blockquote>
<p>Everyone who uses R, or any programming language for that matter, has trouble find them at some point. This is normal. We must develop strategies to work through these, including:</p>
<ol style="list-style-type: decimal">
<li>Looking at the help file for the function, by putting ‘?’ before the function, for instance, <code>?pivot_wider()</code>.</li>
<li>Checking the class and ensuring that it is what we expect, by using the function <code><a href="https://rdrr.io/r/base/class.html">class()</a></code>, for instance, <code>class(data_set$data_column)</code>.</li>
<li>Looking for typos.</li>
<li>Searching for the error message, focusing especially on Stack Overflow answers.</li>
<li>Searching for what we are trying to do, being sure to include ‘tidyverse’ or ‘in R’ in the search to help make the results more appropriate.</li>
<li>Restarting R (‘Session’ -&gt; ‘Restart R and Clear Output’) and starting again.</li>
<li>Making a small, self-contained, reproducible example ‘reprex’ to see if the issue can be isolated and to enable others to help.</li>
<li>Restarting your computer.</li>
</ol>
<p>Having established the need to have a thorough plan for when things go wrong, w</p>
</div>
<div id="exercises-and-tutorial-2" class="section level2" number="3.10">
<h2>
<span class="header-section-number">3.10</span> Exercises and tutorial<a class="anchor" aria-label="anchor" href="#exercises-and-tutorial-2"><i class="fas fa-link"></i></a>
</h2>
<div id="exercises-2" class="section level3" number="3.10.1">
<h3>
<span class="header-section-number">3.10.1</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-2"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li>What is R?
<ol style="list-style-type: lower-alpha">
<li>A open-source statistical programming language</li>
<li>A programming language created by Guido van Rossum</li>
<li>A closed source statistical programming language</li>
<li>An integrated development environment (IDE)</li>
</ol>
</li>
<li>What are three advantages of R? What are three disadvantages?</li>
<li>What is R Studio?
<ol style="list-style-type: lower-alpha">
<li>An integrated development environment (IDE).</li>
<li>A closed source paid program.</li>
<li>A programming language created by Guido van Rossum</li>
<li>A statistical programming language.</li>
</ol>
</li>
<li>What is the class of the output of ‘2 + 2’ (pick one)?
<ol style="list-style-type: lower-alpha">
<li>character</li>
<li>factor</li>
<li>numeric</li>
<li>date</li>
</ol>
</li>
<li>Say we had run: <code>my_name &lt;- 'Rohan'</code>. What would be the result of running <code>print(my_name)</code> (pick one)?
<ol style="list-style-type: lower-alpha">
<li>‘Edward’</li>
<li>‘Monica’</li>
<li>‘Hugo’</li>
<li>‘Rohan’</li>
</ol>
</li>
<li>Say we had a dataset with two columns: ‘name,’ and ‘age.’ Which verb should we use to pick just ‘name’ (pick one)?
<ol style="list-style-type: lower-alpha">
<li>
<code>tidyverse::select()</code>.</li>
<li>
<code>tidyverse::mutate()</code>.</li>
<li>
<code>tidyverse::filter()</code>.</li>
<li>
<code>tidyverse::rename()</code>.</li>
</ol>
</li>
<li>Say we had loaded <code>AustralianPoliticians</code> and <code>tidyverse</code> and then run the following code: <code>australian_politicians &lt;- AustralianPoliticians::get_auspol('all')</code>. How could we select all of the columns that end with ‘Name’ (pick one)?
<ol style="list-style-type: lower-alpha">
<li><code>australian_politicians |&gt; select(contains("Name"))</code></li>
<li><code>australian_politicians |&gt; select(starts_with("Name"))</code></li>
<li><code>australian_politicians |&gt; select(matches("Name"))</code></li>
<li><code>australian_politicians |&gt; select(ends_with("Name"))</code></li>
</ol>
</li>
<li>Under what circumstances, in terms of the names of the columns, would the use of ‘contains()’ potentially give different answers to using ‘ends_with()’ in the above question?<br>
</li>
<li>Assume a variable called ‘age’ is an integer. Which line of code would create a column that is its exponential (pick one)?
<ol style="list-style-type: lower-alpha">
<li><code>mutate(exp_age = exponential(age))</code></li>
<li><code>mutate(exp_age = exponent(age))</code></li>
<li><code>mutate(exp_age = exp(age))</code></li>
<li><code>mutate(exp_age = expon(age))</code></li>
</ol>
</li>
<li>Assume a column called ‘age.’ Which line of code could create a column that contains the value from five rows above?
<ol style="list-style-type: lower-alpha">
<li><code>mutate(five_before = lag(age))</code></li>
<li><code>mutate(five_before = lead(age))</code></li>
<li><code>mutate(five_before = lag(age, n = 5))</code></li>
<li><code>mutate(five_before = lead(age, n = 5))</code></li>
</ol>
</li>
<li>Which of the following are not tidyverse verbs (pick one)?
<ol style="list-style-type: lower-alpha">
<li>
<code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>.</li>
<li>
<code>visualize()</code>.</li>
</ol>
</li>
<li>If I wanted to make a new column which verb should I use (pick one)?
<ol style="list-style-type: lower-alpha">
<li>
<code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>.</li>
<li>
<code>visualize()</code>.</li>
</ol>
</li>
<li>If I wanted to focus on particular rows which verb should I use (pick one)?
<ol style="list-style-type: lower-alpha">
<li>
<code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>.</li>
<li><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code></li>
</ol>
</li>
<li>If I wanted a summary of the data that gave me the mean by sex, which two verbs should I use (pick one)?
<ol style="list-style-type: lower-alpha">
<li>
<code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>.</li>
</ol>
</li>
<li>Assume a variable called age is an integer. Which line of code would create a column that is its exponential?
<ol style="list-style-type: lower-alpha">
<li>mutate(exp_age = exponential(age))</li>
<li>mutate(exp_age = exponent(age))</li>
<li>mutate(exp_age = exp(age))</li>
<li>mutate(exp_age = expon(age))</li>
</ol>
</li>
<li>Assume a column called age, and I want to create a column that contains the value from five rows above. Which line of code would create a column that is its exponential?
<ol style="list-style-type: lower-alpha">
<li>mutate(five_before = lag(age))</li>
<li>mutate(five_before = lead(age))</li>
<li>mutate(five_before = lag(age, n = 5))</li>
<li>mutate(five_before = lead(age, n = 5))</li>
</ol>
</li>
<li>What are the three key aspects of the grammar of graphics (select all)?
<ol style="list-style-type: lower-alpha">
<li>data.</li>
<li>aesthetics.</li>
<li>type.</li>
<li>geom_histogram().</li>
</ol>
</li>
<li>What is not one of the four challenges for mitigating bias mentioned in <span class="citation"><a href="references-1.html#ref-hao2019" role="doc-biblioref">Hao</a> (<a href="references-1.html#ref-hao2019" role="doc-biblioref">2019</a>)</span> (pick one)?
<ol style="list-style-type: lower-alpha">
<li>Unknown unknowns.</li>
<li>Imperfect processes.</li>
<li>The definitions of fairness.</li>
<li>Lack of social context.</li>
<li>Disinterest given profit considerations.</li>
</ol>
</li>
<li>What would be the output of <code>class('edward')</code> (pick one)?
<ol style="list-style-type: lower-alpha">
<li>‘numeric.’</li>
<li>‘character.’</li>
<li>‘data.frame.’</li>
<li>‘vector.’</li>
</ol>
</li>
<li>How can I simulate 10,000 draws from a normal distribution with a mean of 27 and a standard deviation of 3 (pick one)?
<ol style="list-style-type: lower-alpha">
<li>
<code>rnorm(10000, mean = 27, sd = 3)</code>.</li>
<li>
<code>rnorm(27, mean = 10000, sd = 3)</code>.</li>
<li>
<code>rnorm(3, mean = 10000, sd = 27)</code>.</li>
<li>
<code>rnorm(27, mean = 3, sd = 1000)</code>.</li>
</ol>
</li>
</ol>
</div>
<div id="tutorial-2" class="section level3" number="3.10.2">
<h3>
<span class="header-section-number">3.10.2</span> Tutorial<a class="anchor" aria-label="anchor" href="#tutorial-2"><i class="fas fa-link"></i></a>
</h3>
<p>Listen to Gladwell and then rank sports teams or other departments or something else of interest to you based on at least three variables and one of which is peer thoughts.</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="drinking-from-a-fire-hose.html"><span class="header-section-number">2</span> Drinking from a fire hose</a></div>
<div class="next"><a href="workflow.html"><span class="header-section-number">4</span> Workflow</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-essentials"><span class="header-section-number">3</span> R essentials</a></li>
<li><a class="nav-link" href="#background"><span class="header-section-number">3.1</span> Background</a></li>
<li><a class="nav-link" href="#broader-impact"><span class="header-section-number">3.2</span> Broader impact</a></li>
<li>
<a class="nav-link" href="#r-r-studio-and-r-studio-cloud"><span class="header-section-number">3.3</span> R, R Studio, and R Studio Cloud</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#r"><span class="header-section-number">3.3.1</span> R</a></li>
<li><a class="nav-link" href="#r-studio"><span class="header-section-number">3.3.2</span> R Studio</a></li>
<li><a class="nav-link" href="#r-studio-cloud"><span class="header-section-number">3.3.3</span> R Studio Cloud</a></li>
</ul>
</li>
<li><a class="nav-link" href="#getting-started"><span class="header-section-number">3.4</span> Getting started</a></li>
<li>
<a class="nav-link" href="#the-dplyr-verbs"><span class="header-section-number">3.5</span> The dplyr verbs</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#select"><span class="header-section-number">3.5.1</span> select()</a></li>
<li><a class="nav-link" href="#filter"><span class="header-section-number">3.5.2</span> filter()</a></li>
<li><a class="nav-link" href="#arrange"><span class="header-section-number">3.5.3</span> arrange()</a></li>
<li><a class="nav-link" href="#mutate"><span class="header-section-number">3.5.4</span> mutate()</a></li>
<li><a class="nav-link" href="#summarise"><span class="header-section-number">3.5.5</span> summarise()</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#base"><span class="header-section-number">3.6</span> Base</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#class"><span class="header-section-number">3.6.1</span> Class</a></li>
<li><a class="nav-link" href="#simulating-data"><span class="header-section-number">3.6.2</span> Simulating data</a></li>
<li><a class="nav-link" href="#functions"><span class="header-section-number">3.6.3</span> Functions</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#ggplot"><span class="header-section-number">3.7</span> ggplot</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#main-features"><span class="header-section-number">3.7.1</span> Main features</a></li>
<li><a class="nav-link" href="#facets"><span class="header-section-number">3.7.2</span> Facets</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#exploring-the-tidyverse"><span class="header-section-number">3.8</span> Exploring the tidyverse</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#tibbles"><span class="header-section-number">3.8.1</span> Tibbles</a></li>
<li><a class="nav-link" href="#importing-data"><span class="header-section-number">3.8.2</span> Importing data</a></li>
<li><a class="nav-link" href="#joining-data"><span class="header-section-number">3.8.3</span> Joining data</a></li>
<li><a class="nav-link" href="#strings"><span class="header-section-number">3.8.4</span> Strings</a></li>
<li><a class="nav-link" href="#pivot"><span class="header-section-number">3.8.5</span> Pivot</a></li>
<li><a class="nav-link" href="#factors"><span class="header-section-number">3.8.6</span> Factors</a></li>
<li><a class="nav-link" href="#cases"><span class="header-section-number">3.8.7</span> Cases</a></li>
</ul>
</li>
<li><a class="nav-link" href="#dealing-with-errors"><span class="header-section-number">3.9</span> Dealing with errors</a></li>
<li>
<a class="nav-link" href="#exercises-and-tutorial-2"><span class="header-section-number">3.10</span> Exercises and tutorial</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#exercises-2"><span class="header-section-number">3.10.1</span> Exercises</a></li>
<li><a class="nav-link" href="#tutorial-2"><span class="header-section-number">3.10.2</span> Tutorial</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/03-r_essentials.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/03-r_essentials.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Telling Stories With Data</strong>" was written by Rohan Alexander. It was last built on 04 January, 2022.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
